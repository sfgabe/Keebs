   1               		.file	"mousekey.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.move_unit,"ax",@progbits
  12               	move_unit:
  13               	.LFB103:
  14               		.file 1 "tmk_core/common/mousekey.c"
   1:tmk_core/common/mousekey.c **** /*
   2:tmk_core/common/mousekey.c ****  * Copyright 2011 Jun Wako <wakojun@gmail.com>
   3:tmk_core/common/mousekey.c ****  *
   4:tmk_core/common/mousekey.c ****  * This program is free software: you can redistribute it and/or modify
   5:tmk_core/common/mousekey.c ****  * it under the terms of the GNU General Public License as published by
   6:tmk_core/common/mousekey.c ****  * the Free Software Foundation, either version 2 of the License, or
   7:tmk_core/common/mousekey.c ****  * (at your option) any later version.
   8:tmk_core/common/mousekey.c ****  *
   9:tmk_core/common/mousekey.c ****  * This program is distributed in the hope that it will be useful,
  10:tmk_core/common/mousekey.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:tmk_core/common/mousekey.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:tmk_core/common/mousekey.c ****  * GNU General Public License for more details.
  13:tmk_core/common/mousekey.c ****  *
  14:tmk_core/common/mousekey.c ****  * You should have received a copy of the GNU General Public License
  15:tmk_core/common/mousekey.c ****  * along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:tmk_core/common/mousekey.c ****  */
  17:tmk_core/common/mousekey.c **** 
  18:tmk_core/common/mousekey.c **** #include <stdint.h>
  19:tmk_core/common/mousekey.c **** #include "keycode.h"
  20:tmk_core/common/mousekey.c **** #include "host.h"
  21:tmk_core/common/mousekey.c **** #include "timer.h"
  22:tmk_core/common/mousekey.c **** #include "print.h"
  23:tmk_core/common/mousekey.c **** #include "debug.h"
  24:tmk_core/common/mousekey.c **** #include "mousekey.h"
  25:tmk_core/common/mousekey.c **** 
  26:tmk_core/common/mousekey.c **** inline int8_t times_inv_sqrt2(int8_t x) {
  27:tmk_core/common/mousekey.c ****     // 181/256 is pretty close to 1/sqrt(2)
  28:tmk_core/common/mousekey.c ****     // 0.70703125                 0.707106781
  29:tmk_core/common/mousekey.c ****     // 1 too small for x=99 and x=198
  30:tmk_core/common/mousekey.c ****     // This ends up being a mult and discard lower 8 bits
  31:tmk_core/common/mousekey.c ****     return (x * 181) >> 8;
  32:tmk_core/common/mousekey.c **** }
  33:tmk_core/common/mousekey.c **** 
  34:tmk_core/common/mousekey.c **** static report_mouse_t mouse_report = {0};
  35:tmk_core/common/mousekey.c **** static void           mousekey_debug(void);
  36:tmk_core/common/mousekey.c **** static uint8_t        mousekey_accel        = 0;
  37:tmk_core/common/mousekey.c **** static uint8_t        mousekey_repeat       = 0;
  38:tmk_core/common/mousekey.c **** static uint8_t        mousekey_wheel_repeat = 0;
  39:tmk_core/common/mousekey.c **** 
  40:tmk_core/common/mousekey.c **** #ifndef MK_3_SPEED
  41:tmk_core/common/mousekey.c **** 
  42:tmk_core/common/mousekey.c **** static uint16_t last_timer_c = 0;
  43:tmk_core/common/mousekey.c **** static uint16_t last_timer_w = 0;
  44:tmk_core/common/mousekey.c **** 
  45:tmk_core/common/mousekey.c **** /*
  46:tmk_core/common/mousekey.c ****  * Mouse keys  acceleration algorithm
  47:tmk_core/common/mousekey.c ****  *  http://en.wikipedia.org/wiki/Mouse_keys
  48:tmk_core/common/mousekey.c ****  *
  49:tmk_core/common/mousekey.c ****  *  speed = delta * max_speed * (repeat / time_to_max)**((1000+curve)/1000)
  50:tmk_core/common/mousekey.c ****  */
  51:tmk_core/common/mousekey.c **** /* milliseconds between the initial key press and first repeated motion event (0-2550) */
  52:tmk_core/common/mousekey.c **** uint8_t mk_delay = MOUSEKEY_DELAY / 10;
  53:tmk_core/common/mousekey.c **** /* milliseconds between repeated motion events (0-255) */
  54:tmk_core/common/mousekey.c **** uint8_t mk_interval = MOUSEKEY_INTERVAL;
  55:tmk_core/common/mousekey.c **** /* steady speed (in action_delta units) applied each event (0-255) */
  56:tmk_core/common/mousekey.c **** uint8_t mk_max_speed = MOUSEKEY_MAX_SPEED;
  57:tmk_core/common/mousekey.c **** /* number of events (count) accelerating to steady speed (0-255) */
  58:tmk_core/common/mousekey.c **** uint8_t mk_time_to_max = MOUSEKEY_TIME_TO_MAX;
  59:tmk_core/common/mousekey.c **** /* ramp used to reach maximum pointer speed (NOT SUPPORTED) */
  60:tmk_core/common/mousekey.c **** // int8_t mk_curve = 0;
  61:tmk_core/common/mousekey.c **** /* wheel params */
  62:tmk_core/common/mousekey.c **** /* milliseconds between the initial key press and first repeated motion event (0-2550) */
  63:tmk_core/common/mousekey.c **** uint8_t mk_wheel_delay = MOUSEKEY_WHEEL_DELAY / 10;
  64:tmk_core/common/mousekey.c **** /* milliseconds between repeated motion events (0-255) */
  65:tmk_core/common/mousekey.c **** uint8_t mk_wheel_interval    = MOUSEKEY_WHEEL_INTERVAL;
  66:tmk_core/common/mousekey.c **** uint8_t mk_wheel_max_speed   = MOUSEKEY_WHEEL_MAX_SPEED;
  67:tmk_core/common/mousekey.c **** uint8_t mk_wheel_time_to_max = MOUSEKEY_WHEEL_TIME_TO_MAX;
  68:tmk_core/common/mousekey.c **** 
  69:tmk_core/common/mousekey.c **** #    ifndef MK_COMBINED
  70:tmk_core/common/mousekey.c **** 
  71:tmk_core/common/mousekey.c **** static uint8_t move_unit(void) {
  15               		.loc 1 71 32 view -0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
  72:tmk_core/common/mousekey.c ****     uint16_t unit;
  21               		.loc 1 72 5 view .LVU1
  73:tmk_core/common/mousekey.c ****     if (mousekey_accel & (1 << 0)) {
  22               		.loc 1 73 5 view .LVU2
  23               		.loc 1 73 24 is_stmt 0 view .LVU3
  24 0000 8091 0000 		lds r24,mousekey_accel
  25               		.loc 1 73 8 view .LVU4
  26 0004 80FF      		sbrs r24,0
  27 0006 00C0      		rjmp .L2
  74:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed) / 4;
  28               		.loc 1 74 9 is_stmt 1 view .LVU5
  29               		.loc 1 74 37 is_stmt 0 view .LVU6
  30 0008 6091 0000 		lds r22,mk_max_speed
  31 000c 85E0      		ldi r24,lo8(5)
  32 000e 689F      		mul r22,r24
  33 0010 B001      		movw r22,r0
  34 0012 1124      		clr __zero_reg__
  35               		.loc 1 74 53 view .LVU7
  36 0014 7595      		asr r23
  37 0016 6795      		ror r22
  38 0018 7595      		asr r23
  39 001a 6795      		ror r22
  40               	.LVL0:
  41               	.L3:
  75:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
  76:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed) / 2;
  77:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  78:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed);
  79:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
  80:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  81:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
  82:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
  83:tmk_core/common/mousekey.c ****     } else {
  84:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed * mousekey_repeat) / mk_time_to_max;
  85:tmk_core/common/mousekey.c ****     }
  86:tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_MOVE_MAX ? MOUSEKEY_MOVE_MAX : (unit == 0 ? 1 : unit));
  42               		.loc 1 86 5 is_stmt 1 view .LVU8
  43               		.loc 1 86 58 is_stmt 0 view .LVU9
  44 001c 6038      		cpi r22,-128
  45 001e 7105      		cpc r23,__zero_reg__
  46 0020 00F4      		brsh .L10
  47               		.loc 1 86 58 discriminator 1 view .LVU10
  48 0022 6115      		cp r22,__zero_reg__
  49 0024 7105      		cpc r23,__zero_reg__
  50 0026 01F0      		breq .L11
  51               	.LVL1:
  52               	.L6:
  53               		.loc 1 86 58 discriminator 3 view .LVU11
  54 0028 862F      		mov r24,r22
  55 002a 0895      		ret
  56               	.L2:
  75:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
  57               		.loc 1 75 12 is_stmt 1 view .LVU12
  75:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
  58               		.loc 1 75 15 is_stmt 0 view .LVU13
  59 002c 81FF      		sbrs r24,1
  60 002e 00C0      		rjmp .L4
  76:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  61               		.loc 1 76 9 is_stmt 1 view .LVU14
  76:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  62               		.loc 1 76 37 is_stmt 0 view .LVU15
  63 0030 6091 0000 		lds r22,mk_max_speed
  64 0034 85E0      		ldi r24,lo8(5)
  65 0036 689F      		mul r22,r24
  66 0038 B001      		movw r22,r0
  67 003a 1124      		clr __zero_reg__
  76:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  68               		.loc 1 76 53 view .LVU16
  69 003c 7595      		asr r23
  70 003e 6795      		ror r22
  71               	.LVL2:
  76:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  72               		.loc 1 76 53 view .LVU17
  73 0040 00C0      		rjmp .L3
  74               	.LVL3:
  75               	.L4:
  77:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed);
  76               		.loc 1 77 12 is_stmt 1 view .LVU18
  78:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
  77               		.loc 1 78 37 is_stmt 0 view .LVU19
  78 0042 6091 0000 		lds r22,mk_max_speed
  77:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed);
  79               		.loc 1 77 15 view .LVU20
  80 0046 82FD      		sbrc r24,2
  81 0048 00C0      		rjmp .L12
  79:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  82               		.loc 1 79 12 is_stmt 1 view .LVU21
  79:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  83               		.loc 1 79 32 is_stmt 0 view .LVU22
  84 004a 8091 0000 		lds r24,mousekey_repeat
  79:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  85               		.loc 1 79 15 view .LVU23
  86 004e 8823      		tst r24
  87 0050 01F0      		breq .L9
  81:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
  88               		.loc 1 81 12 is_stmt 1 view .LVU24
  81:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
  89               		.loc 1 81 32 is_stmt 0 view .LVU25
  90 0052 9091 0000 		lds r25,mk_time_to_max
  91 0056 6091 0000 		lds r22,mk_max_speed
  81:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
  92               		.loc 1 81 15 view .LVU26
  93 005a 8917      		cp r24,r25
  94 005c 00F0      		brlo .L7
  95               	.L12:
  82:tmk_core/common/mousekey.c ****     } else {
  96               		.loc 1 82 9 is_stmt 1 view .LVU27
  82:tmk_core/common/mousekey.c ****     } else {
  97               		.loc 1 82 36 is_stmt 0 view .LVU28
  98 005e 85E0      		ldi r24,lo8(5)
  99 0060 689F      		mul r22,r24
 100 0062 B001      		movw r22,r0
 101 0064 1124      		clr __zero_reg__
 102               	.LVL4:
  82:tmk_core/common/mousekey.c ****     } else {
 103               		.loc 1 82 36 view .LVU29
 104 0066 00C0      		rjmp .L3
 105               	.LVL5:
 106               	.L7:
  84:tmk_core/common/mousekey.c ****     }
 107               		.loc 1 84 9 is_stmt 1 view .LVU30
  84:tmk_core/common/mousekey.c ****     }
 108               		.loc 1 84 52 is_stmt 0 view .LVU31
 109 0068 869F      		mul r24,r22
 110 006a B001      		movw r22,r0
 111 006c 1124      		clr __zero_reg__
 112 006e 85E0      		ldi r24,lo8(5)
 113 0070 869F      		mul r24,r22
 114 0072 9001      		movw r18,r0
 115 0074 879F      		mul r24,r23
 116 0076 300D      		add r19,r0
 117 0078 1124      		clr __zero_reg__
  84:tmk_core/common/mousekey.c ****     }
 118               		.loc 1 84 71 view .LVU32
 119 007a 692F      		mov r22,r25
 120 007c 70E0      		ldi r23,0
  84:tmk_core/common/mousekey.c ****     }
 121               		.loc 1 84 14 view .LVU33
 122 007e C901      		movw r24,r18
 123 0080 0E94 0000 		call __divmodhi4
 124               	.LVL6:
  84:tmk_core/common/mousekey.c ****     }
 125               		.loc 1 84 14 view .LVU34
 126 0084 00C0      		rjmp .L3
 127               	.LVL7:
 128               	.L9:
  80:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
 129               		.loc 1 80 14 view .LVU35
 130 0086 65E0      		ldi r22,lo8(5)
 131 0088 70E0      		ldi r23,0
 132 008a 00C0      		rjmp .L6
 133               	.LVL8:
 134               	.L10:
 135               		.loc 1 86 58 view .LVU36
 136 008c 8FE7      		ldi r24,lo8(127)
 137 008e 0895      		ret
 138               	.L11:
 139 0090 81E0      		ldi r24,lo8(1)
 140               	/* epilogue start */
  87:tmk_core/common/mousekey.c **** }
 141               		.loc 1 87 1 view .LVU37
 142 0092 0895      		ret
 143               		.cfi_endproc
 144               	.LFE103:
 146               		.section	.text.wheel_unit,"ax",@progbits
 148               	wheel_unit:
 149               	.LFB104:
  88:tmk_core/common/mousekey.c **** 
  89:tmk_core/common/mousekey.c **** static uint8_t wheel_unit(void) {
 150               		.loc 1 89 33 is_stmt 1 view -0
 151               		.cfi_startproc
 152               	/* prologue: function */
 153               	/* frame size = 0 */
 154               	/* stack size = 0 */
 155               	.L__stack_usage = 0
  90:tmk_core/common/mousekey.c ****     uint16_t unit;
 156               		.loc 1 90 5 view .LVU39
  91:tmk_core/common/mousekey.c ****     if (mousekey_accel & (1 << 0)) {
 157               		.loc 1 91 5 view .LVU40
 158               		.loc 1 91 24 is_stmt 0 view .LVU41
 159 0000 8091 0000 		lds r24,mousekey_accel
 160               		.loc 1 91 8 view .LVU42
 161 0004 80FF      		sbrs r24,0
 162 0006 00C0      		rjmp .L14
  92:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed) / 4;
 163               		.loc 1 92 9 is_stmt 1 view .LVU43
 164               		.loc 1 92 38 is_stmt 0 view .LVU44
 165 0008 6091 0000 		lds r22,mk_wheel_max_speed
 166 000c 70E0      		ldi r23,0
 167               		.loc 1 92 60 view .LVU45
 168 000e 7595      		asr r23
 169 0010 6795      		ror r22
 170 0012 7595      		asr r23
 171 0014 6795      		ror r22
 172               	.LVL9:
 173               	.L15:
  93:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
  94:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed) / 2;
  95:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  96:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed);
  97:tmk_core/common/mousekey.c ****     } else if (mousekey_wheel_repeat == 0) {
  98:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
  99:tmk_core/common/mousekey.c ****     } else if (mousekey_wheel_repeat >= mk_wheel_time_to_max) {
 100:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
 101:tmk_core/common/mousekey.c ****     } else {
 102:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed * mousekey_wheel_repeat) / mk_wheel_time_
 103:tmk_core/common/mousekey.c ****     }
 104:tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_WHEEL_MAX ? MOUSEKEY_WHEEL_MAX : (unit == 0 ? 1 : unit));
 174               		.loc 1 104 60 view .LVU46
 175 0016 6115      		cp r22,__zero_reg__
 176 0018 7105      		cpc r23,__zero_reg__
 177 001a 01F0      		breq .L24
 178               	.LVL10:
 179               	.L19:
 180               		.loc 1 104 60 discriminator 3 view .LVU47
 181 001c 862F      		mov r24,r22
 182 001e 0895      		ret
 183               	.L14:
  93:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
 184               		.loc 1 93 12 is_stmt 1 view .LVU48
  93:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
 185               		.loc 1 93 15 is_stmt 0 view .LVU49
 186 0020 81FF      		sbrs r24,1
 187 0022 00C0      		rjmp .L16
  94:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 188               		.loc 1 94 9 is_stmt 1 view .LVU50
  94:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 189               		.loc 1 94 38 is_stmt 0 view .LVU51
 190 0024 6091 0000 		lds r22,mk_wheel_max_speed
 191 0028 70E0      		ldi r23,0
  94:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 192               		.loc 1 94 60 view .LVU52
 193 002a 7595      		asr r23
 194 002c 6795      		ror r22
 195               	.LVL11:
  94:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 196               		.loc 1 94 60 view .LVU53
 197 002e 00C0      		rjmp .L15
 198               	.LVL12:
 199               	.L16:
  95:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed);
 200               		.loc 1 95 12 is_stmt 1 view .LVU54
  96:tmk_core/common/mousekey.c ****     } else if (mousekey_wheel_repeat == 0) {
 201               		.loc 1 96 14 is_stmt 0 view .LVU55
 202 0030 6091 0000 		lds r22,mk_wheel_max_speed
  95:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed);
 203               		.loc 1 95 15 view .LVU56
 204 0034 82FD      		sbrc r24,2
 205 0036 00C0      		rjmp .L25
  97:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
 206               		.loc 1 97 12 is_stmt 1 view .LVU57
  97:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
 207               		.loc 1 97 38 is_stmt 0 view .LVU58
 208 0038 9091 0000 		lds r25,mousekey_wheel_repeat
  97:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
 209               		.loc 1 97 15 view .LVU59
 210 003c 9923      		tst r25
 211 003e 01F0      		breq .L22
  99:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
 212               		.loc 1 99 12 is_stmt 1 view .LVU60
  99:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
 213               		.loc 1 99 38 is_stmt 0 view .LVU61
 214 0040 6091 0000 		lds r22,mk_wheel_time_to_max
 215 0044 8091 0000 		lds r24,mk_wheel_max_speed
  99:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
 216               		.loc 1 99 15 view .LVU62
 217 0048 9617      		cp r25,r22
 218 004a 00F0      		brlo .L20
 100:tmk_core/common/mousekey.c ****     } else {
 219               		.loc 1 100 9 is_stmt 1 view .LVU63
 100:tmk_core/common/mousekey.c ****     } else {
 220               		.loc 1 100 14 is_stmt 0 view .LVU64
 221 004c 682F      		mov r22,r24
 222               	.L25:
 223 004e 70E0      		ldi r23,0
 224               	.LVL13:
 225               	.L18:
 226               		.loc 1 104 5 is_stmt 1 view .LVU65
 227               		.loc 1 104 60 is_stmt 0 view .LVU66
 228 0050 6038      		cpi r22,-128
 229 0052 7105      		cpc r23,__zero_reg__
 230 0054 00F0      		brlo .L15
 231 0056 8FE7      		ldi r24,lo8(127)
 232 0058 0895      		ret
 233               	.LVL14:
 234               	.L20:
 102:tmk_core/common/mousekey.c ****     }
 235               		.loc 1 102 9 is_stmt 1 view .LVU67
 102:tmk_core/common/mousekey.c ****     }
 236               		.loc 1 102 59 is_stmt 0 view .LVU68
 237 005a 899F      		mul r24,r25
 238 005c C001      		movw r24,r0
 239 005e 1124      		clr __zero_reg__
 102:tmk_core/common/mousekey.c ****     }
 240               		.loc 1 102 84 view .LVU69
 241 0060 70E0      		ldi r23,0
 102:tmk_core/common/mousekey.c ****     }
 242               		.loc 1 102 14 view .LVU70
 243 0062 0E94 0000 		call __divmodhi4
 244               	.LVL15:
 102:tmk_core/common/mousekey.c ****     }
 245               		.loc 1 102 14 view .LVU71
 246 0066 00C0      		rjmp .L18
 247               	.LVL16:
 248               	.L22:
  98:tmk_core/common/mousekey.c ****     } else if (mousekey_wheel_repeat >= mk_wheel_time_to_max) {
 249               		.loc 1 98 14 view .LVU72
 250 0068 61E0      		ldi r22,lo8(1)
 251 006a 70E0      		ldi r23,0
 252 006c 00C0      		rjmp .L19
 253               	.LVL17:
 254               	.L24:
 255               		.loc 1 104 60 view .LVU73
 256 006e 81E0      		ldi r24,lo8(1)
 257               	/* epilogue start */
 105:tmk_core/common/mousekey.c **** }
 258               		.loc 1 105 1 view .LVU74
 259 0070 0895      		ret
 260               		.cfi_endproc
 261               	.LFE104:
 263               		.section	.text.mousekey_on,"ax",@progbits
 264               	.global	mousekey_on
 266               	mousekey_on:
 267               	.LVL18:
 268               	.LFB106:
 106:tmk_core/common/mousekey.c **** 
 107:tmk_core/common/mousekey.c **** #    else /* #ifndef MK_COMBINED */
 108:tmk_core/common/mousekey.c **** 
 109:tmk_core/common/mousekey.c **** static uint8_t move_unit(void) {
 110:tmk_core/common/mousekey.c ****     uint16_t unit;
 111:tmk_core/common/mousekey.c ****     if (mousekey_accel & (1 << 0)) {
 112:tmk_core/common/mousekey.c ****         unit = 1;
 113:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
 114:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed) / 2;
 115:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 116:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_MAX;
 117:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
 118:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
 119:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
 120:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
 121:tmk_core/common/mousekey.c ****     } else {
 122:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed * mousekey_repeat) / mk_time_to_max;
 123:tmk_core/common/mousekey.c ****     }
 124:tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_MOVE_MAX ? MOUSEKEY_MOVE_MAX : (unit == 0 ? 1 : unit));
 125:tmk_core/common/mousekey.c **** }
 126:tmk_core/common/mousekey.c **** 
 127:tmk_core/common/mousekey.c **** static uint8_t wheel_unit(void) {
 128:tmk_core/common/mousekey.c ****     uint16_t unit;
 129:tmk_core/common/mousekey.c ****     if (mousekey_accel & (1 << 0)) {
 130:tmk_core/common/mousekey.c ****         unit = 1;
 131:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
 132:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed) / 2;
 133:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 134:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_MAX;
 135:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
 136:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
 137:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_wheel_time_to_max) {
 138:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
 139:tmk_core/common/mousekey.c ****     } else {
 140:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed * mousekey_repeat) / mk_wheel_time_to_max
 141:tmk_core/common/mousekey.c ****     }
 142:tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_WHEEL_MAX ? MOUSEKEY_WHEEL_MAX : (unit == 0 ? 1 : unit));
 143:tmk_core/common/mousekey.c **** }
 144:tmk_core/common/mousekey.c **** 
 145:tmk_core/common/mousekey.c **** #    endif /* #ifndef MK_COMBINED */
 146:tmk_core/common/mousekey.c **** 
 147:tmk_core/common/mousekey.c **** void mousekey_task(void) {
 148:tmk_core/common/mousekey.c ****     // report cursor and scroll movement independently
 149:tmk_core/common/mousekey.c ****     report_mouse_t const tmpmr = mouse_report;
 150:tmk_core/common/mousekey.c **** 
 151:tmk_core/common/mousekey.c ****     mouse_report.x = 0;
 152:tmk_core/common/mousekey.c ****     mouse_report.y = 0;
 153:tmk_core/common/mousekey.c ****     mouse_report.v = 0;
 154:tmk_core/common/mousekey.c ****     mouse_report.h = 0;
 155:tmk_core/common/mousekey.c **** 
 156:tmk_core/common/mousekey.c ****     if ((tmpmr.x || tmpmr.y) && timer_elapsed(last_timer_c) > (mousekey_repeat ? mk_interval : mk_d
 157:tmk_core/common/mousekey.c ****         if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 158:tmk_core/common/mousekey.c ****         if (tmpmr.x != 0) mouse_report.x = move_unit() * ((tmpmr.x > 0) ? 1 : -1);
 159:tmk_core/common/mousekey.c ****         if (tmpmr.y != 0) mouse_report.y = move_unit() * ((tmpmr.y > 0) ? 1 : -1);
 160:tmk_core/common/mousekey.c **** 
 161:tmk_core/common/mousekey.c ****         /* diagonal move [1/sqrt(2)] */
 162:tmk_core/common/mousekey.c ****         if (mouse_report.x && mouse_report.y) {
 163:tmk_core/common/mousekey.c ****             mouse_report.x = times_inv_sqrt2(mouse_report.x);
 164:tmk_core/common/mousekey.c ****             if (mouse_report.x == 0) {
 165:tmk_core/common/mousekey.c ****                 mouse_report.x = 1;
 166:tmk_core/common/mousekey.c ****             }
 167:tmk_core/common/mousekey.c ****             mouse_report.y = times_inv_sqrt2(mouse_report.y);
 168:tmk_core/common/mousekey.c ****             if (mouse_report.y == 0) {
 169:tmk_core/common/mousekey.c ****                 mouse_report.y = 1;
 170:tmk_core/common/mousekey.c ****             }
 171:tmk_core/common/mousekey.c ****         }
 172:tmk_core/common/mousekey.c ****     }
 173:tmk_core/common/mousekey.c ****     if ((tmpmr.v || tmpmr.h) && timer_elapsed(last_timer_w) > (mousekey_wheel_repeat ? mk_wheel_int
 174:tmk_core/common/mousekey.c ****         if (mousekey_wheel_repeat != UINT8_MAX) mousekey_wheel_repeat++;
 175:tmk_core/common/mousekey.c ****         if (tmpmr.v != 0) mouse_report.v = wheel_unit() * ((tmpmr.v > 0) ? 1 : -1);
 176:tmk_core/common/mousekey.c ****         if (tmpmr.h != 0) mouse_report.h = wheel_unit() * ((tmpmr.h > 0) ? 1 : -1);
 177:tmk_core/common/mousekey.c **** 
 178:tmk_core/common/mousekey.c ****         /* diagonal move [1/sqrt(2)] */
 179:tmk_core/common/mousekey.c ****         if (mouse_report.v && mouse_report.h) {
 180:tmk_core/common/mousekey.c ****             mouse_report.v = times_inv_sqrt2(mouse_report.v);
 181:tmk_core/common/mousekey.c ****             if (mouse_report.v == 0) {
 182:tmk_core/common/mousekey.c ****                 mouse_report.v = 1;
 183:tmk_core/common/mousekey.c ****             }
 184:tmk_core/common/mousekey.c ****             mouse_report.h = times_inv_sqrt2(mouse_report.h);
 185:tmk_core/common/mousekey.c ****             if (mouse_report.h == 0) {
 186:tmk_core/common/mousekey.c ****                 mouse_report.h = 1;
 187:tmk_core/common/mousekey.c ****             }
 188:tmk_core/common/mousekey.c ****         }
 189:tmk_core/common/mousekey.c ****     }
 190:tmk_core/common/mousekey.c **** 
 191:tmk_core/common/mousekey.c ****     if (mouse_report.x || mouse_report.y || mouse_report.v || mouse_report.h) mousekey_send();
 192:tmk_core/common/mousekey.c ****     mouse_report = tmpmr;
 193:tmk_core/common/mousekey.c **** }
 194:tmk_core/common/mousekey.c **** 
 195:tmk_core/common/mousekey.c **** void mousekey_on(uint8_t code) {
 269               		.loc 1 195 32 is_stmt 1 view -0
 270               		.cfi_startproc
 271               	/* prologue: function */
 272               	/* frame size = 0 */
 273               	/* stack size = 0 */
 274               	.L__stack_usage = 0
 196:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP)
 275               		.loc 1 196 5 view .LVU76
 276               		.loc 1 196 8 is_stmt 0 view .LVU77
 277 0000 803F      		cpi r24,lo8(-16)
 278 0002 01F4      		brne .L27
 197:tmk_core/common/mousekey.c ****         mouse_report.y = move_unit() * -1;
 279               		.loc 1 197 9 is_stmt 1 view .LVU78
 280               		.loc 1 197 26 is_stmt 0 view .LVU79
 281 0004 0E94 0000 		call move_unit
 282               	.LVL19:
 283               		.loc 1 197 24 view .LVU80
 284 0008 8195      		neg r24
 285               	.L43:
 198:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)
 199:tmk_core/common/mousekey.c ****         mouse_report.y = move_unit();
 286               		.loc 1 199 24 view .LVU81
 287 000a 8093 0000 		sts mouse_report+3,r24
 288 000e 0895      		ret
 289               	.LVL20:
 290               	.L27:
 198:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)
 291               		.loc 1 198 10 is_stmt 1 view .LVU82
 198:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)
 292               		.loc 1 198 13 is_stmt 0 view .LVU83
 293 0010 813F      		cpi r24,lo8(-15)
 294 0012 01F4      		brne .L29
 295               		.loc 1 199 9 is_stmt 1 view .LVU84
 296               		.loc 1 199 26 is_stmt 0 view .LVU85
 297 0014 0E94 0000 		call move_unit
 298               	.LVL21:
 299               		.loc 1 199 26 view .LVU86
 300 0018 00C0      		rjmp .L43
 301               	.LVL22:
 302               	.L29:
 200:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT)
 303               		.loc 1 200 10 is_stmt 1 view .LVU87
 304               		.loc 1 200 13 is_stmt 0 view .LVU88
 305 001a 823F      		cpi r24,lo8(-14)
 306 001c 01F4      		brne .L30
 201:tmk_core/common/mousekey.c ****         mouse_report.x = move_unit() * -1;
 307               		.loc 1 201 9 is_stmt 1 view .LVU89
 308               		.loc 1 201 26 is_stmt 0 view .LVU90
 309 001e 0E94 0000 		call move_unit
 310               	.LVL23:
 311               		.loc 1 201 24 view .LVU91
 312 0022 8195      		neg r24
 313               	.L45:
 202:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)
 203:tmk_core/common/mousekey.c ****         mouse_report.x = move_unit();
 314               		.loc 1 203 24 view .LVU92
 315 0024 8093 0000 		sts mouse_report+2,r24
 316 0028 0895      		ret
 317               	.LVL24:
 318               	.L30:
 202:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)
 319               		.loc 1 202 10 is_stmt 1 view .LVU93
 202:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)
 320               		.loc 1 202 13 is_stmt 0 view .LVU94
 321 002a 833F      		cpi r24,lo8(-13)
 322 002c 01F4      		brne .L31
 323               		.loc 1 203 9 is_stmt 1 view .LVU95
 324               		.loc 1 203 26 is_stmt 0 view .LVU96
 325 002e 0E94 0000 		call move_unit
 326               	.LVL25:
 327               		.loc 1 203 26 view .LVU97
 328 0032 00C0      		rjmp .L45
 329               	.LVL26:
 330               	.L31:
 204:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP)
 331               		.loc 1 204 10 is_stmt 1 view .LVU98
 332               		.loc 1 204 13 is_stmt 0 view .LVU99
 333 0034 893F      		cpi r24,lo8(-7)
 334 0036 01F4      		brne .L32
 205:tmk_core/common/mousekey.c ****         mouse_report.v = wheel_unit();
 335               		.loc 1 205 9 is_stmt 1 view .LVU100
 336               		.loc 1 205 26 is_stmt 0 view .LVU101
 337 0038 0E94 0000 		call wheel_unit
 338               	.LVL27:
 339               	.L47:
 206:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)
 207:tmk_core/common/mousekey.c ****         mouse_report.v = wheel_unit() * -1;
 340               		.loc 1 207 24 view .LVU102
 341 003c 8093 0000 		sts mouse_report+4,r24
 342 0040 0895      		ret
 343               	.LVL28:
 344               	.L32:
 206:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)
 345               		.loc 1 206 10 is_stmt 1 view .LVU103
 206:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)
 346               		.loc 1 206 13 is_stmt 0 view .LVU104
 347 0042 8A3F      		cpi r24,lo8(-6)
 348 0044 01F4      		brne .L33
 349               		.loc 1 207 9 is_stmt 1 view .LVU105
 350               		.loc 1 207 26 is_stmt 0 view .LVU106
 351 0046 0E94 0000 		call wheel_unit
 352               	.LVL29:
 353               		.loc 1 207 24 view .LVU107
 354 004a 8195      		neg r24
 355 004c 00C0      		rjmp .L47
 356               	.LVL30:
 357               	.L33:
 208:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT)
 358               		.loc 1 208 10 is_stmt 1 view .LVU108
 359               		.loc 1 208 13 is_stmt 0 view .LVU109
 360 004e 8B3F      		cpi r24,lo8(-5)
 361 0050 01F4      		brne .L34
 209:tmk_core/common/mousekey.c ****         mouse_report.h = wheel_unit() * -1;
 362               		.loc 1 209 9 is_stmt 1 view .LVU110
 363               		.loc 1 209 26 is_stmt 0 view .LVU111
 364 0052 0E94 0000 		call wheel_unit
 365               	.LVL31:
 366               		.loc 1 209 24 view .LVU112
 367 0056 8195      		neg r24
 368               	.L48:
 210:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT)
 211:tmk_core/common/mousekey.c ****         mouse_report.h = wheel_unit();
 369               		.loc 1 211 24 view .LVU113
 370 0058 8093 0000 		sts mouse_report+5,r24
 371 005c 0895      		ret
 372               	.LVL32:
 373               	.L34:
 210:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT)
 374               		.loc 1 210 10 is_stmt 1 view .LVU114
 210:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT)
 375               		.loc 1 210 13 is_stmt 0 view .LVU115
 376 005e 8C3F      		cpi r24,lo8(-4)
 377 0060 01F4      		brne .L35
 378               		.loc 1 211 9 is_stmt 1 view .LVU116
 379               		.loc 1 211 26 is_stmt 0 view .LVU117
 380 0062 0E94 0000 		call wheel_unit
 381               	.LVL33:
 382               		.loc 1 211 26 view .LVU118
 383 0066 00C0      		rjmp .L48
 384               	.LVL34:
 385               	.L35:
 212:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 386               		.loc 1 212 10 is_stmt 1 view .LVU119
 387               		.loc 1 212 13 is_stmt 0 view .LVU120
 388 0068 843F      		cpi r24,lo8(-12)
 389 006a 01F4      		brne .L36
 213:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN1;
 390               		.loc 1 213 9 is_stmt 1 view .LVU121
 391               		.loc 1 213 30 is_stmt 0 view .LVU122
 392 006c 8091 0000 		lds r24,mouse_report+1
 393               	.LVL35:
 394               		.loc 1 213 30 view .LVU123
 395 0070 8160      		ori r24,lo8(1)
 396               	.L46:
 214:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 215:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN2;
 216:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 217:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN3;
 218:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 219:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN4;
 220:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 221:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN5;
 397               		.loc 1 221 30 view .LVU124
 398 0072 8093 0000 		sts mouse_report+1,r24
 399 0076 0895      		ret
 400               	.LVL36:
 401               	.L36:
 214:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 402               		.loc 1 214 10 is_stmt 1 view .LVU125
 214:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 403               		.loc 1 214 13 is_stmt 0 view .LVU126
 404 0078 853F      		cpi r24,lo8(-11)
 405 007a 01F4      		brne .L37
 215:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 406               		.loc 1 215 9 is_stmt 1 view .LVU127
 215:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 407               		.loc 1 215 30 is_stmt 0 view .LVU128
 408 007c 8091 0000 		lds r24,mouse_report+1
 409               	.LVL37:
 215:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 410               		.loc 1 215 30 view .LVU129
 411 0080 8260      		ori r24,lo8(2)
 412 0082 00C0      		rjmp .L46
 413               	.LVL38:
 414               	.L37:
 216:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN3;
 415               		.loc 1 216 10 is_stmt 1 view .LVU130
 216:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN3;
 416               		.loc 1 216 13 is_stmt 0 view .LVU131
 417 0084 863F      		cpi r24,lo8(-10)
 418 0086 01F4      		brne .L38
 217:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 419               		.loc 1 217 9 is_stmt 1 view .LVU132
 217:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 420               		.loc 1 217 30 is_stmt 0 view .LVU133
 421 0088 8091 0000 		lds r24,mouse_report+1
 422               	.LVL39:
 217:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 423               		.loc 1 217 30 view .LVU134
 424 008c 8460      		ori r24,lo8(4)
 425 008e 00C0      		rjmp .L46
 426               	.LVL40:
 427               	.L38:
 218:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN4;
 428               		.loc 1 218 10 is_stmt 1 view .LVU135
 218:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN4;
 429               		.loc 1 218 13 is_stmt 0 view .LVU136
 430 0090 873F      		cpi r24,lo8(-9)
 431 0092 01F4      		brne .L39
 219:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 432               		.loc 1 219 9 is_stmt 1 view .LVU137
 219:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 433               		.loc 1 219 30 is_stmt 0 view .LVU138
 434 0094 8091 0000 		lds r24,mouse_report+1
 435               	.LVL41:
 219:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 436               		.loc 1 219 30 view .LVU139
 437 0098 8860      		ori r24,lo8(8)
 438 009a 00C0      		rjmp .L46
 439               	.LVL42:
 440               	.L39:
 220:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN5;
 441               		.loc 1 220 10 is_stmt 1 view .LVU140
 220:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN5;
 442               		.loc 1 220 13 is_stmt 0 view .LVU141
 443 009c 883F      		cpi r24,lo8(-8)
 444 009e 01F4      		brne .L40
 445               		.loc 1 221 9 is_stmt 1 view .LVU142
 446               		.loc 1 221 30 is_stmt 0 view .LVU143
 447 00a0 8091 0000 		lds r24,mouse_report+1
 448               	.LVL43:
 449               		.loc 1 221 30 view .LVU144
 450 00a4 8061      		ori r24,lo8(16)
 451 00a6 00C0      		rjmp .L46
 452               	.LVL44:
 453               	.L40:
 222:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 454               		.loc 1 222 10 is_stmt 1 view .LVU145
 455               		.loc 1 222 13 is_stmt 0 view .LVU146
 456 00a8 8D3F      		cpi r24,lo8(-3)
 457 00aa 01F4      		brne .L41
 223:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 0);
 458               		.loc 1 223 9 is_stmt 1 view .LVU147
 459               		.loc 1 223 24 is_stmt 0 view .LVU148
 460 00ac 8091 0000 		lds r24,mousekey_accel
 461               	.LVL45:
 462               		.loc 1 223 24 view .LVU149
 463 00b0 8160      		ori r24,lo8(1)
 464               	.L44:
 224:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 225:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 1);
 226:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 227:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 2);
 465               		.loc 1 227 24 view .LVU150
 466 00b2 8093 0000 		sts mousekey_accel,r24
 467               	.L26:
 468               	/* epilogue start */
 228:tmk_core/common/mousekey.c **** }
 469               		.loc 1 228 1 view .LVU151
 470 00b6 0895      		ret
 471               	.LVL46:
 472               	.L41:
 224:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 473               		.loc 1 224 10 is_stmt 1 view .LVU152
 224:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 474               		.loc 1 224 13 is_stmt 0 view .LVU153
 475 00b8 8E3F      		cpi r24,lo8(-2)
 476 00ba 01F4      		brne .L42
 225:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 477               		.loc 1 225 9 is_stmt 1 view .LVU154
 225:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 478               		.loc 1 225 24 is_stmt 0 view .LVU155
 479 00bc 8091 0000 		lds r24,mousekey_accel
 480               	.LVL47:
 225:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 481               		.loc 1 225 24 view .LVU156
 482 00c0 8260      		ori r24,lo8(2)
 483 00c2 00C0      		rjmp .L44
 484               	.LVL48:
 485               	.L42:
 226:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 2);
 486               		.loc 1 226 10 is_stmt 1 view .LVU157
 226:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 2);
 487               		.loc 1 226 13 is_stmt 0 view .LVU158
 488 00c4 8F3F      		cpi r24,lo8(-1)
 489 00c6 01F4      		brne .L26
 227:tmk_core/common/mousekey.c **** }
 490               		.loc 1 227 9 is_stmt 1 view .LVU159
 227:tmk_core/common/mousekey.c **** }
 491               		.loc 1 227 24 is_stmt 0 view .LVU160
 492 00c8 8091 0000 		lds r24,mousekey_accel
 493               	.LVL49:
 227:tmk_core/common/mousekey.c **** }
 494               		.loc 1 227 24 view .LVU161
 495 00cc 8460      		ori r24,lo8(4)
 496 00ce 00C0      		rjmp .L44
 497               		.cfi_endproc
 498               	.LFE106:
 500               		.section	.text.mousekey_off,"ax",@progbits
 501               	.global	mousekey_off
 503               	mousekey_off:
 504               	.LVL50:
 505               	.LFB107:
 229:tmk_core/common/mousekey.c **** 
 230:tmk_core/common/mousekey.c **** void mousekey_off(uint8_t code) {
 506               		.loc 1 230 33 is_stmt 1 view -0
 507               		.cfi_startproc
 508               	/* prologue: function */
 509               	/* frame size = 0 */
 510               	/* stack size = 0 */
 511               	.L__stack_usage = 0
 231:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP && mouse_report.y < 0)
 512               		.loc 1 231 5 view .LVU163
 513 0000 9091 0000 		lds r25,mouse_report+2
 514               		.loc 1 231 8 is_stmt 0 view .LVU164
 515 0004 803F      		cpi r24,lo8(-16)
 516 0006 01F4      		brne .L50
 517               		.loc 1 231 26 discriminator 1 view .LVU165
 518 0008 8091 0000 		lds r24,mouse_report+3
 519               	.LVL51:
 520               		.loc 1 231 26 discriminator 1 view .LVU166
 521 000c 87FF      		sbrs r24,7
 522 000e 00C0      		rjmp .L51
 523               	.L55:
 232:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 524               		.loc 1 232 9 is_stmt 1 view .LVU167
 525               		.loc 1 232 24 is_stmt 0 view .LVU168
 526 0010 1092 0000 		sts mouse_report+3,__zero_reg__
 233:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 234:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 235:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT && mouse_report.x < 0)
 236:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 237:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT && mouse_report.x > 0)
 238:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 239:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP && mouse_report.v > 0)
 240:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 241:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN && mouse_report.v < 0)
 242:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 243:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT && mouse_report.h < 0)
 244:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 245:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0)
 246:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 247:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 248:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN1;
 249:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 250:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN2;
 251:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 252:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN3;
 253:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 254:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN4;
 255:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 256:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN5;
 257:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 258:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 0);
 259:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 260:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 1);
 261:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 262:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 2);
 263:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0) mousekey_repeat = 0;
 527               		.loc 1 263 5 is_stmt 1 view .LVU169
 528               		.loc 1 263 8 is_stmt 0 view .LVU170
 529 0014 9111      		cpse r25,__zero_reg__
 530 0016 00C0      		rjmp .L73
 531               	.L52:
 532               		.loc 1 263 53 is_stmt 1 discriminator 2 view .LVU171
 533               		.loc 1 263 69 is_stmt 0 discriminator 2 view .LVU172
 534 0018 1092 0000 		sts mousekey_repeat,__zero_reg__
 535 001c 00C0      		rjmp .L73
 536               	.LVL52:
 537               	.L50:
 233:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 538               		.loc 1 233 10 is_stmt 1 view .LVU173
 233:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 539               		.loc 1 233 13 is_stmt 0 view .LVU174
 540 001e 813F      		cpi r24,lo8(-15)
 541 0020 01F4      		brne .L54
 233:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 542               		.loc 1 233 33 discriminator 1 view .LVU175
 543 0022 8091 0000 		lds r24,mouse_report+3
 544               	.LVL53:
 233:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 545               		.loc 1 233 33 discriminator 1 view .LVU176
 546 0026 1816      		cp __zero_reg__,r24
 547 0028 04F0      		brlt .L55
 548               	.L51:
 549               		.loc 1 263 5 is_stmt 1 view .LVU177
 550               		.loc 1 263 8 is_stmt 0 view .LVU178
 551 002a 9923      		tst r25
 552 002c 01F0      		breq .L57
 553               	.L73:
 264:tmk_core/common/mousekey.c ****     if (mouse_report.v == 0 && mouse_report.h == 0) mousekey_wheel_repeat = 0;
 554               		.loc 1 264 5 is_stmt 1 view .LVU179
 555               		.loc 1 264 29 is_stmt 0 view .LVU180
 556 002e 8091 0000 		lds r24,mouse_report+4
 557 0032 9091 0000 		lds r25,mouse_report+5
 558 0036 892B      		or r24,r25
 559 0038 01F0      		breq .+2
 560 003a 00C0      		rjmp .L49
 561               		.loc 1 264 53 is_stmt 1 discriminator 2 view .LVU181
 562               		.loc 1 264 75 is_stmt 0 discriminator 2 view .LVU182
 563 003c 1092 0000 		sts mousekey_wheel_repeat,__zero_reg__
 265:tmk_core/common/mousekey.c **** }
 564               		.loc 1 265 1 discriminator 2 view .LVU183
 565 0040 0895      		ret
 566               	.LVL54:
 567               	.L54:
 235:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 568               		.loc 1 235 10 is_stmt 1 view .LVU184
 235:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 569               		.loc 1 235 13 is_stmt 0 view .LVU185
 570 0042 823F      		cpi r24,lo8(-14)
 571 0044 01F4      		brne .L56
 235:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 572               		.loc 1 235 33 discriminator 1 view .LVU186
 573 0046 97FF      		sbrs r25,7
 574 0048 00C0      		rjmp .L51
 575               	.L59:
 236:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT && mouse_report.x > 0)
 576               		.loc 1 236 9 is_stmt 1 view .LVU187
 236:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT && mouse_report.x > 0)
 577               		.loc 1 236 24 is_stmt 0 view .LVU188
 578 004a 1092 0000 		sts mouse_report+2,__zero_reg__
 579               	.LVL55:
 580               	.L57:
 263:tmk_core/common/mousekey.c ****     if (mouse_report.v == 0 && mouse_report.h == 0) mousekey_wheel_repeat = 0;
 581               		.loc 1 263 5 is_stmt 1 view .LVU189
 263:tmk_core/common/mousekey.c ****     if (mouse_report.v == 0 && mouse_report.h == 0) mousekey_wheel_repeat = 0;
 582               		.loc 1 263 29 is_stmt 0 view .LVU190
 583 004e 8091 0000 		lds r24,mouse_report+3
 584 0052 8111      		cpse r24,__zero_reg__
 585 0054 00C0      		rjmp .L73
 586 0056 00C0      		rjmp .L52
 587               	.LVL56:
 588               	.L56:
 237:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 589               		.loc 1 237 10 is_stmt 1 view .LVU191
 237:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 590               		.loc 1 237 13 is_stmt 0 view .LVU192
 591 0058 833F      		cpi r24,lo8(-13)
 592 005a 01F4      		brne .L58
 237:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 593               		.loc 1 237 34 discriminator 1 view .LVU193
 594 005c 1916      		cp __zero_reg__,r25
 595 005e 04F0      		brlt .L59
 596 0060 00C0      		rjmp .L51
 597               	.L58:
 598 0062 2091 0000 		lds r18,mouse_report+4
 239:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 599               		.loc 1 239 10 is_stmt 1 view .LVU194
 239:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 600               		.loc 1 239 13 is_stmt 0 view .LVU195
 601 0066 893F      		cpi r24,lo8(-7)
 602 0068 01F4      		brne .L60
 239:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 603               		.loc 1 239 34 discriminator 1 view .LVU196
 604 006a 1216      		cp __zero_reg__,r18
 605 006c 04F4      		brge .L51
 606               	.L62:
 240:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN && mouse_report.v < 0)
 607               		.loc 1 240 9 is_stmt 1 view .LVU197
 240:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN && mouse_report.v < 0)
 608               		.loc 1 240 24 is_stmt 0 view .LVU198
 609 006e 1092 0000 		sts mouse_report+4,__zero_reg__
 610 0072 00C0      		rjmp .L51
 611               	.L60:
 241:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 612               		.loc 1 241 10 is_stmt 1 view .LVU199
 241:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 613               		.loc 1 241 13 is_stmt 0 view .LVU200
 614 0074 8A3F      		cpi r24,lo8(-6)
 615 0076 01F4      		brne .L61
 241:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 616               		.loc 1 241 36 discriminator 1 view .LVU201
 617 0078 27FF      		sbrs r18,7
 618 007a 00C0      		rjmp .L51
 619 007c 00C0      		rjmp .L62
 620               	.L61:
 621 007e 2091 0000 		lds r18,mouse_report+5
 243:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 622               		.loc 1 243 10 is_stmt 1 view .LVU202
 243:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 623               		.loc 1 243 13 is_stmt 0 view .LVU203
 624 0082 8B3F      		cpi r24,lo8(-5)
 625 0084 01F4      		brne .L63
 243:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 626               		.loc 1 243 36 discriminator 1 view .LVU204
 627 0086 27FF      		sbrs r18,7
 628 0088 00C0      		rjmp .L51
 629               	.L65:
 244:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0)
 630               		.loc 1 244 9 is_stmt 1 view .LVU205
 244:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0)
 631               		.loc 1 244 24 is_stmt 0 view .LVU206
 632 008a 1092 0000 		sts mouse_report+5,__zero_reg__
 633 008e 00C0      		rjmp .L51
 634               	.L63:
 245:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 635               		.loc 1 245 10 is_stmt 1 view .LVU207
 245:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 636               		.loc 1 245 13 is_stmt 0 view .LVU208
 637 0090 8C3F      		cpi r24,lo8(-4)
 638 0092 01F4      		brne .L64
 245:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 639               		.loc 1 245 37 discriminator 1 view .LVU209
 640 0094 1216      		cp __zero_reg__,r18
 641 0096 04F0      		brlt .L65
 642 0098 00C0      		rjmp .L51
 643               	.L64:
 247:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN1;
 644               		.loc 1 247 10 is_stmt 1 view .LVU210
 247:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN1;
 645               		.loc 1 247 13 is_stmt 0 view .LVU211
 646 009a 843F      		cpi r24,lo8(-12)
 647 009c 01F4      		brne .L66
 248:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 648               		.loc 1 248 9 is_stmt 1 view .LVU212
 248:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 649               		.loc 1 248 30 is_stmt 0 view .LVU213
 650 009e 8091 0000 		lds r24,mouse_report+1
 651               	.LVL57:
 248:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 652               		.loc 1 248 30 view .LVU214
 653 00a2 8E7F      		andi r24,lo8(-2)
 654               	.L84:
 256:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 655               		.loc 1 256 30 view .LVU215
 656 00a4 8093 0000 		sts mouse_report+1,r24
 657 00a8 00C0      		rjmp .L51
 658               	.LVL58:
 659               	.L66:
 249:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN2;
 660               		.loc 1 249 10 is_stmt 1 view .LVU216
 249:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN2;
 661               		.loc 1 249 13 is_stmt 0 view .LVU217
 662 00aa 853F      		cpi r24,lo8(-11)
 663 00ac 01F4      		brne .L67
 250:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 664               		.loc 1 250 9 is_stmt 1 view .LVU218
 250:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 665               		.loc 1 250 30 is_stmt 0 view .LVU219
 666 00ae 8091 0000 		lds r24,mouse_report+1
 667               	.LVL59:
 250:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 668               		.loc 1 250 30 view .LVU220
 669 00b2 8D7F      		andi r24,lo8(-3)
 670 00b4 00C0      		rjmp .L84
 671               	.LVL60:
 672               	.L67:
 251:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN3;
 673               		.loc 1 251 10 is_stmt 1 view .LVU221
 251:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN3;
 674               		.loc 1 251 13 is_stmt 0 view .LVU222
 675 00b6 863F      		cpi r24,lo8(-10)
 676 00b8 01F4      		brne .L68
 252:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 677               		.loc 1 252 9 is_stmt 1 view .LVU223
 252:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 678               		.loc 1 252 30 is_stmt 0 view .LVU224
 679 00ba 8091 0000 		lds r24,mouse_report+1
 680               	.LVL61:
 252:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 681               		.loc 1 252 30 view .LVU225
 682 00be 8B7F      		andi r24,lo8(-5)
 683 00c0 00C0      		rjmp .L84
 684               	.LVL62:
 685               	.L68:
 253:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN4;
 686               		.loc 1 253 10 is_stmt 1 view .LVU226
 253:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN4;
 687               		.loc 1 253 13 is_stmt 0 view .LVU227
 688 00c2 873F      		cpi r24,lo8(-9)
 689 00c4 01F4      		brne .L69
 254:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 690               		.loc 1 254 9 is_stmt 1 view .LVU228
 254:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 691               		.loc 1 254 30 is_stmt 0 view .LVU229
 692 00c6 8091 0000 		lds r24,mouse_report+1
 693               	.LVL63:
 254:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 694               		.loc 1 254 30 view .LVU230
 695 00ca 877F      		andi r24,lo8(-9)
 696 00cc 00C0      		rjmp .L84
 697               	.LVL64:
 698               	.L69:
 255:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN5;
 699               		.loc 1 255 10 is_stmt 1 view .LVU231
 255:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN5;
 700               		.loc 1 255 13 is_stmt 0 view .LVU232
 701 00ce 883F      		cpi r24,lo8(-8)
 702 00d0 01F4      		brne .L70
 256:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 703               		.loc 1 256 9 is_stmt 1 view .LVU233
 256:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 704               		.loc 1 256 30 is_stmt 0 view .LVU234
 705 00d2 8091 0000 		lds r24,mouse_report+1
 706               	.LVL65:
 256:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 707               		.loc 1 256 30 view .LVU235
 708 00d6 8F7E      		andi r24,lo8(-17)
 709 00d8 00C0      		rjmp .L84
 710               	.LVL66:
 711               	.L70:
 257:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 0);
 712               		.loc 1 257 10 is_stmt 1 view .LVU236
 257:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 0);
 713               		.loc 1 257 13 is_stmt 0 view .LVU237
 714 00da 8D3F      		cpi r24,lo8(-3)
 715 00dc 01F4      		brne .L71
 258:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 716               		.loc 1 258 9 is_stmt 1 view .LVU238
 258:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 717               		.loc 1 258 24 is_stmt 0 view .LVU239
 718 00de 8091 0000 		lds r24,mousekey_accel
 719               	.LVL67:
 258:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 720               		.loc 1 258 24 view .LVU240
 721 00e2 8E7F      		andi r24,lo8(-2)
 722               	.L85:
 262:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0) mousekey_repeat = 0;
 723               		.loc 1 262 24 view .LVU241
 724 00e4 8093 0000 		sts mousekey_accel,r24
 725 00e8 00C0      		rjmp .L51
 726               	.LVL68:
 727               	.L71:
 259:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 1);
 728               		.loc 1 259 10 is_stmt 1 view .LVU242
 259:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 1);
 729               		.loc 1 259 13 is_stmt 0 view .LVU243
 730 00ea 8E3F      		cpi r24,lo8(-2)
 731 00ec 01F4      		brne .L72
 260:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 732               		.loc 1 260 9 is_stmt 1 view .LVU244
 260:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 733               		.loc 1 260 24 is_stmt 0 view .LVU245
 734 00ee 8091 0000 		lds r24,mousekey_accel
 735               	.LVL69:
 260:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 736               		.loc 1 260 24 view .LVU246
 737 00f2 8D7F      		andi r24,lo8(-3)
 738 00f4 00C0      		rjmp .L85
 739               	.LVL70:
 740               	.L72:
 261:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 2);
 741               		.loc 1 261 10 is_stmt 1 view .LVU247
 261:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 2);
 742               		.loc 1 261 13 is_stmt 0 view .LVU248
 743 00f6 8F3F      		cpi r24,lo8(-1)
 744 00f8 01F0      		breq .+2
 745 00fa 00C0      		rjmp .L51
 262:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0) mousekey_repeat = 0;
 746               		.loc 1 262 9 is_stmt 1 view .LVU249
 262:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0) mousekey_repeat = 0;
 747               		.loc 1 262 24 is_stmt 0 view .LVU250
 748 00fc 8091 0000 		lds r24,mousekey_accel
 749               	.LVL71:
 262:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0) mousekey_repeat = 0;
 750               		.loc 1 262 24 view .LVU251
 751 0100 8B7F      		andi r24,lo8(-5)
 752 0102 00C0      		rjmp .L85
 753               	.L49:
 754               	/* epilogue start */
 755               		.loc 1 265 1 view .LVU252
 756 0104 0895      		ret
 757               		.cfi_endproc
 758               	.LFE107:
 760               		.section	.text.mousekey_send,"ax",@progbits
 761               	.global	mousekey_send
 763               	mousekey_send:
 764               	.LFB108:
 266:tmk_core/common/mousekey.c **** 
 267:tmk_core/common/mousekey.c **** #else /* #ifndef MK_3_SPEED */
 268:tmk_core/common/mousekey.c **** 
 269:tmk_core/common/mousekey.c **** enum { mkspd_unmod, mkspd_0, mkspd_1, mkspd_2, mkspd_COUNT };
 270:tmk_core/common/mousekey.c **** #    ifndef MK_MOMENTARY_ACCEL
 271:tmk_core/common/mousekey.c **** static uint8_t  mk_speed                 = mkspd_1;
 272:tmk_core/common/mousekey.c **** #    else
 273:tmk_core/common/mousekey.c **** static uint8_t mk_speed      = mkspd_unmod;
 274:tmk_core/common/mousekey.c **** static uint8_t mkspd_DEFAULT = mkspd_unmod;
 275:tmk_core/common/mousekey.c **** #    endif
 276:tmk_core/common/mousekey.c **** static uint16_t last_timer_c             = 0;
 277:tmk_core/common/mousekey.c **** static uint16_t last_timer_w             = 0;
 278:tmk_core/common/mousekey.c **** uint16_t        c_offsets[mkspd_COUNT]   = {MK_C_OFFSET_UNMOD, MK_C_OFFSET_0, MK_C_OFFSET_1, MK_C_O
 279:tmk_core/common/mousekey.c **** uint16_t        c_intervals[mkspd_COUNT] = {MK_C_INTERVAL_UNMOD, MK_C_INTERVAL_0, MK_C_INTERVAL_1, 
 280:tmk_core/common/mousekey.c **** uint16_t        w_offsets[mkspd_COUNT]   = {MK_W_OFFSET_UNMOD, MK_W_OFFSET_0, MK_W_OFFSET_1, MK_W_O
 281:tmk_core/common/mousekey.c **** uint16_t        w_intervals[mkspd_COUNT] = {MK_W_INTERVAL_UNMOD, MK_W_INTERVAL_0, MK_W_INTERVAL_1, 
 282:tmk_core/common/mousekey.c **** 
 283:tmk_core/common/mousekey.c **** void mousekey_task(void) {
 284:tmk_core/common/mousekey.c ****     // report cursor and scroll movement independently
 285:tmk_core/common/mousekey.c ****     report_mouse_t const tmpmr = mouse_report;
 286:tmk_core/common/mousekey.c ****     mouse_report.x             = 0;
 287:tmk_core/common/mousekey.c ****     mouse_report.y             = 0;
 288:tmk_core/common/mousekey.c ****     mouse_report.v             = 0;
 289:tmk_core/common/mousekey.c ****     mouse_report.h             = 0;
 290:tmk_core/common/mousekey.c **** 
 291:tmk_core/common/mousekey.c ****     if ((tmpmr.x || tmpmr.y) && timer_elapsed(last_timer_c) > c_intervals[mk_speed]) {
 292:tmk_core/common/mousekey.c ****         mouse_report.x = tmpmr.x;
 293:tmk_core/common/mousekey.c ****         mouse_report.y = tmpmr.y;
 294:tmk_core/common/mousekey.c ****     }
 295:tmk_core/common/mousekey.c ****     if ((tmpmr.h || tmpmr.v) && timer_elapsed(last_timer_w) > w_intervals[mk_speed]) {
 296:tmk_core/common/mousekey.c ****         mouse_report.v = tmpmr.v;
 297:tmk_core/common/mousekey.c ****         mouse_report.h = tmpmr.h;
 298:tmk_core/common/mousekey.c ****     }
 299:tmk_core/common/mousekey.c **** 
 300:tmk_core/common/mousekey.c ****     if (mouse_report.x || mouse_report.y || mouse_report.v || mouse_report.h) mousekey_send();
 301:tmk_core/common/mousekey.c ****     mouse_report = tmpmr;
 302:tmk_core/common/mousekey.c **** }
 303:tmk_core/common/mousekey.c **** 
 304:tmk_core/common/mousekey.c **** void adjust_speed(void) {
 305:tmk_core/common/mousekey.c ****     uint16_t const c_offset = c_offsets[mk_speed];
 306:tmk_core/common/mousekey.c ****     uint16_t const w_offset = w_offsets[mk_speed];
 307:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = c_offset;
 308:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = c_offset * -1;
 309:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = c_offset;
 310:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = c_offset * -1;
 311:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = w_offset;
 312:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = w_offset * -1;
 313:tmk_core/common/mousekey.c ****     if (mouse_report.v > 0) mouse_report.v = w_offset;
 314:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = w_offset * -1;
 315:tmk_core/common/mousekey.c ****     // adjust for diagonals
 316:tmk_core/common/mousekey.c ****     if (mouse_report.x && mouse_report.y) {
 317:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 318:tmk_core/common/mousekey.c ****         if (mouse_report.x == 0) {
 319:tmk_core/common/mousekey.c ****             mouse_report.x = 1;
 320:tmk_core/common/mousekey.c ****         }
 321:tmk_core/common/mousekey.c ****         mouse_report.y = times_inv_sqrt2(mouse_report.y);
 322:tmk_core/common/mousekey.c ****         if (mouse_report.y == 0) {
 323:tmk_core/common/mousekey.c ****             mouse_report.y = 1;
 324:tmk_core/common/mousekey.c ****         }
 325:tmk_core/common/mousekey.c ****     }
 326:tmk_core/common/mousekey.c ****     if (mouse_report.h && mouse_report.v) {
 327:tmk_core/common/mousekey.c ****         mouse_report.h = times_inv_sqrt2(mouse_report.h);
 328:tmk_core/common/mousekey.c ****         mouse_report.v = times_inv_sqrt2(mouse_report.v);
 329:tmk_core/common/mousekey.c ****     }
 330:tmk_core/common/mousekey.c **** }
 331:tmk_core/common/mousekey.c **** 
 332:tmk_core/common/mousekey.c **** void mousekey_on(uint8_t code) {
 333:tmk_core/common/mousekey.c ****     uint16_t const c_offset  = c_offsets[mk_speed];
 334:tmk_core/common/mousekey.c ****     uint16_t const w_offset  = w_offsets[mk_speed];
 335:tmk_core/common/mousekey.c ****     uint8_t const  old_speed = mk_speed;
 336:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP)
 337:tmk_core/common/mousekey.c ****         mouse_report.y = c_offset * -1;
 338:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)
 339:tmk_core/common/mousekey.c ****         mouse_report.y = c_offset;
 340:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT)
 341:tmk_core/common/mousekey.c ****         mouse_report.x = c_offset * -1;
 342:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)
 343:tmk_core/common/mousekey.c ****         mouse_report.x = c_offset;
 344:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP)
 345:tmk_core/common/mousekey.c ****         mouse_report.v = w_offset;
 346:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)
 347:tmk_core/common/mousekey.c ****         mouse_report.v = w_offset * -1;
 348:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT)
 349:tmk_core/common/mousekey.c ****         mouse_report.h = w_offset * -1;
 350:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT)
 351:tmk_core/common/mousekey.c ****         mouse_report.h = w_offset;
 352:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 353:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN1;
 354:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 355:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN2;
 356:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 357:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN3;
 358:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 359:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN4;
 360:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 361:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN5;
 362:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 363:tmk_core/common/mousekey.c ****         mk_speed = mkspd_0;
 364:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 365:tmk_core/common/mousekey.c ****         mk_speed = mkspd_1;
 366:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 367:tmk_core/common/mousekey.c ****         mk_speed = mkspd_2;
 368:tmk_core/common/mousekey.c ****     if (mk_speed != old_speed) adjust_speed();
 369:tmk_core/common/mousekey.c **** }
 370:tmk_core/common/mousekey.c **** 
 371:tmk_core/common/mousekey.c **** void mousekey_off(uint8_t code) {
 372:tmk_core/common/mousekey.c **** #    ifdef MK_MOMENTARY_ACCEL
 373:tmk_core/common/mousekey.c ****     uint8_t const old_speed = mk_speed;
 374:tmk_core/common/mousekey.c **** #    endif
 375:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP && mouse_report.y < 0)
 376:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 377:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 378:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 379:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT && mouse_report.x < 0)
 380:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 381:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT && mouse_report.x > 0)
 382:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 383:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP && mouse_report.v > 0)
 384:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 385:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN && mouse_report.v < 0)
 386:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 387:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT && mouse_report.h < 0)
 388:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 389:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0)
 390:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 391:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 392:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN1;
 393:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 394:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN2;
 395:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 396:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN3;
 397:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 398:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN4;
 399:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 400:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN5;
 401:tmk_core/common/mousekey.c **** #    ifdef MK_MOMENTARY_ACCEL
 402:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 403:tmk_core/common/mousekey.c ****         mk_speed = mkspd_DEFAULT;
 404:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 405:tmk_core/common/mousekey.c ****         mk_speed = mkspd_DEFAULT;
 406:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 407:tmk_core/common/mousekey.c ****         mk_speed = mkspd_DEFAULT;
 408:tmk_core/common/mousekey.c ****     if (mk_speed != old_speed) adjust_speed();
 409:tmk_core/common/mousekey.c **** #    endif
 410:tmk_core/common/mousekey.c **** }
 411:tmk_core/common/mousekey.c **** 
 412:tmk_core/common/mousekey.c **** #endif /* #ifndef MK_3_SPEED */
 413:tmk_core/common/mousekey.c **** 
 414:tmk_core/common/mousekey.c **** void mousekey_send(void) {
 765               		.loc 1 414 26 is_stmt 1 view -0
 766               		.cfi_startproc
 767               	/* prologue: function */
 768               	/* frame size = 0 */
 769               	/* stack size = 0 */
 770               	.L__stack_usage = 0
 415:tmk_core/common/mousekey.c ****     mousekey_debug();
 771               		.loc 1 415 5 view .LVU254
 416:tmk_core/common/mousekey.c ****     uint16_t time = timer_read();
 772               		.loc 1 416 5 view .LVU255
 773               		.loc 1 416 21 is_stmt 0 view .LVU256
 774 0000 0E94 0000 		call timer_read
 775               	.LVL72:
 776 0004 9C01      		movw r18,r24
 777               	.LVL73:
 417:tmk_core/common/mousekey.c ****     if (mouse_report.x || mouse_report.y) last_timer_c = time;
 778               		.loc 1 417 5 is_stmt 1 view .LVU257
 779               		.loc 1 417 24 is_stmt 0 view .LVU258
 780 0006 9091 0000 		lds r25,mouse_report+2
 781 000a 8091 0000 		lds r24,mouse_report+3
 782 000e 982B      		or r25,r24
 783 0010 01F0      		breq .L87
 784               		.loc 1 417 43 is_stmt 1 discriminator 3 view .LVU259
 785               		.loc 1 417 56 is_stmt 0 discriminator 3 view .LVU260
 786 0012 3093 0000 		sts last_timer_c+1,r19
 787 0016 2093 0000 		sts last_timer_c,r18
 788               	.L87:
 418:tmk_core/common/mousekey.c ****     if (mouse_report.v || mouse_report.h) last_timer_w = time;
 789               		.loc 1 418 5 is_stmt 1 view .LVU261
 790               		.loc 1 418 24 is_stmt 0 view .LVU262
 791 001a 9091 0000 		lds r25,mouse_report+4
 792 001e 8091 0000 		lds r24,mouse_report+5
 793 0022 982B      		or r25,r24
 794 0024 01F0      		breq .L88
 795               		.loc 1 418 43 is_stmt 1 discriminator 3 view .LVU263
 796               		.loc 1 418 56 is_stmt 0 discriminator 3 view .LVU264
 797 0026 3093 0000 		sts last_timer_w+1,r19
 798 002a 2093 0000 		sts last_timer_w,r18
 799               	.L88:
 419:tmk_core/common/mousekey.c ****     host_mouse_send(&mouse_report);
 800               		.loc 1 419 5 is_stmt 1 view .LVU265
 801 002e 80E0      		ldi r24,lo8(mouse_report)
 802 0030 90E0      		ldi r25,hi8(mouse_report)
 803 0032 0C94 0000 		jmp host_mouse_send
 804               	.LVL74:
 805               		.loc 1 419 5 is_stmt 0 view .LVU266
 806               		.cfi_endproc
 807               	.LFE108:
 809               		.section	.text.mousekey_task,"ax",@progbits
 810               	.global	mousekey_task
 812               	mousekey_task:
 813               	.LFB105:
 147:tmk_core/common/mousekey.c ****     // report cursor and scroll movement independently
 814               		.loc 1 147 26 is_stmt 1 view -0
 815               		.cfi_startproc
 816 0000 EF92      		push r14
 817               	.LCFI0:
 818               		.cfi_def_cfa_offset 3
 819               		.cfi_offset 14, -2
 820 0002 FF92      		push r15
 821               	.LCFI1:
 822               		.cfi_def_cfa_offset 4
 823               		.cfi_offset 15, -3
 824 0004 0F93      		push r16
 825               	.LCFI2:
 826               		.cfi_def_cfa_offset 5
 827               		.cfi_offset 16, -4
 828 0006 1F93      		push r17
 829               	.LCFI3:
 830               		.cfi_def_cfa_offset 6
 831               		.cfi_offset 17, -5
 832 0008 CF93      		push r28
 833               	.LCFI4:
 834               		.cfi_def_cfa_offset 7
 835               		.cfi_offset 28, -6
 836 000a DF93      		push r29
 837               	.LCFI5:
 838               		.cfi_def_cfa_offset 8
 839               		.cfi_offset 29, -7
 840 000c 00D0      		rcall .
 841 000e 00D0      		rcall .
 842 0010 00D0      		rcall .
 843               	.LCFI6:
 844               		.cfi_def_cfa_offset 14
 845 0012 CDB7      		in r28,__SP_L__
 846 0014 DEB7      		in r29,__SP_H__
 847               	.LCFI7:
 848               		.cfi_def_cfa_register 28
 849               	/* prologue: function */
 850               	/* frame size = 6 */
 851               	/* stack size = 12 */
 852               	.L__stack_usage = 12
 149:tmk_core/common/mousekey.c **** 
 853               		.loc 1 149 5 view .LVU268
 149:tmk_core/common/mousekey.c **** 
 854               		.loc 1 149 26 is_stmt 0 view .LVU269
 855 0016 86E0      		ldi r24,lo8(6)
 856 0018 E0E0      		ldi r30,lo8(mouse_report)
 857 001a F0E0      		ldi r31,hi8(mouse_report)
 858 001c DE01      		movw r26,r28
 859 001e 1196      		adiw r26,1
 860               		0:
 861 0020 0190      		ld r0,Z+
 862 0022 0D92      		st X+,r0
 863 0024 8A95      		dec r24
 864 0026 01F4      		brne 0b
 865 0028 E090 0000 		lds r14,mouse_report+2
 866               	.LVL75:
 149:tmk_core/common/mousekey.c **** 
 867               		.loc 1 149 26 view .LVU270
 868 002c F090 0000 		lds r15,mouse_report+3
 869               	.LVL76:
 149:tmk_core/common/mousekey.c **** 
 870               		.loc 1 149 26 view .LVU271
 871 0030 0091 0000 		lds r16,mouse_report+4
 872               	.LVL77:
 149:tmk_core/common/mousekey.c **** 
 873               		.loc 1 149 26 view .LVU272
 874 0034 1091 0000 		lds r17,mouse_report+5
 875               	.LVL78:
 151:tmk_core/common/mousekey.c ****     mouse_report.y = 0;
 876               		.loc 1 151 5 is_stmt 1 view .LVU273
 151:tmk_core/common/mousekey.c ****     mouse_report.y = 0;
 877               		.loc 1 151 20 is_stmt 0 view .LVU274
 878 0038 1092 0000 		sts mouse_report+2,__zero_reg__
 152:tmk_core/common/mousekey.c ****     mouse_report.v = 0;
 879               		.loc 1 152 5 is_stmt 1 view .LVU275
 152:tmk_core/common/mousekey.c ****     mouse_report.v = 0;
 880               		.loc 1 152 20 is_stmt 0 view .LVU276
 881 003c 1092 0000 		sts mouse_report+3,__zero_reg__
 153:tmk_core/common/mousekey.c ****     mouse_report.h = 0;
 882               		.loc 1 153 5 is_stmt 1 view .LVU277
 153:tmk_core/common/mousekey.c ****     mouse_report.h = 0;
 883               		.loc 1 153 20 is_stmt 0 view .LVU278
 884 0040 1092 0000 		sts mouse_report+4,__zero_reg__
 154:tmk_core/common/mousekey.c **** 
 885               		.loc 1 154 5 is_stmt 1 view .LVU279
 154:tmk_core/common/mousekey.c **** 
 886               		.loc 1 154 20 is_stmt 0 view .LVU280
 887 0044 1092 0000 		sts mouse_report+5,__zero_reg__
 156:tmk_core/common/mousekey.c ****         if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 888               		.loc 1 156 5 is_stmt 1 view .LVU281
 156:tmk_core/common/mousekey.c ****         if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 889               		.loc 1 156 18 is_stmt 0 view .LVU282
 890 0048 8E2D      		mov r24,r14
 891 004a 8F29      		or r24,r15
 892 004c 01F0      		breq .L97
 156:tmk_core/common/mousekey.c ****         if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 893               		.loc 1 156 33 discriminator 3 view .LVU283
 894 004e 8091 0000 		lds r24,last_timer_c
 895 0052 9091 0000 		lds r25,last_timer_c+1
 896 0056 0E94 0000 		call timer_elapsed
 897               	.LVL79:
 898 005a AC01      		movw r20,r24
 156:tmk_core/common/mousekey.c ****         if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 899               		.loc 1 156 80 discriminator 3 view .LVU284
 900 005c 9091 0000 		lds r25,mousekey_repeat
 156:tmk_core/common/mousekey.c ****         if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 901               		.loc 1 156 94 discriminator 3 view .LVU285
 902 0060 9923      		tst r25
 903 0062 01F4      		brne .+2
 904 0064 00C0      		rjmp .L98
 156:tmk_core/common/mousekey.c ****         if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 905               		.loc 1 156 94 discriminator 4 view .LVU286
 906 0066 8091 0000 		lds r24,mk_interval
 156:tmk_core/common/mousekey.c ****         if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 907               		.loc 1 156 30 discriminator 4 view .LVU287
 908 006a 8417      		cp r24,r20
 909 006c 1506      		cpc __zero_reg__,r21
 910 006e 00F4      		brsh .+2
 911 0070 00C0      		rjmp .L99
 912               	.L97:
 173:tmk_core/common/mousekey.c ****         if (mousekey_wheel_repeat != UINT8_MAX) mousekey_wheel_repeat++;
 913               		.loc 1 173 5 is_stmt 1 view .LVU288
 173:tmk_core/common/mousekey.c ****         if (mousekey_wheel_repeat != UINT8_MAX) mousekey_wheel_repeat++;
 914               		.loc 1 173 18 is_stmt 0 view .LVU289
 915 0072 802F      		mov r24,r16
 916 0074 812B      		or r24,r17
 917 0076 01F0      		breq .L111
 173:tmk_core/common/mousekey.c ****         if (mousekey_wheel_repeat != UINT8_MAX) mousekey_wheel_repeat++;
 918               		.loc 1 173 33 discriminator 3 view .LVU290
 919 0078 8091 0000 		lds r24,last_timer_w
 920 007c 9091 0000 		lds r25,last_timer_w+1
 921 0080 0E94 0000 		call timer_elapsed
 922               	.LVL80:
 923 0084 AC01      		movw r20,r24
 173:tmk_core/common/mousekey.c ****         if (mousekey_wheel_repeat != UINT8_MAX) mousekey_wheel_repeat++;
 924               		.loc 1 173 86 discriminator 3 view .LVU291
 925 0086 9091 0000 		lds r25,mousekey_wheel_repeat
 173:tmk_core/common/mousekey.c ****         if (mousekey_wheel_repeat != UINT8_MAX) mousekey_wheel_repeat++;
 926               		.loc 1 173 106 discriminator 3 view .LVU292
 927 008a 9923      		tst r25
 928 008c 01F4      		brne .+2
 929 008e 00C0      		rjmp .L112
 173:tmk_core/common/mousekey.c ****         if (mousekey_wheel_repeat != UINT8_MAX) mousekey_wheel_repeat++;
 930               		.loc 1 173 106 discriminator 4 view .LVU293
 931 0090 8091 0000 		lds r24,mk_wheel_interval
 173:tmk_core/common/mousekey.c ****         if (mousekey_wheel_repeat != UINT8_MAX) mousekey_wheel_repeat++;
 932               		.loc 1 173 30 discriminator 4 view .LVU294
 933 0094 8417      		cp r24,r20
 934 0096 1506      		cpc __zero_reg__,r21
 935 0098 00F4      		brsh .+2
 936 009a 00C0      		rjmp .L113
 937               	.L111:
 191:tmk_core/common/mousekey.c ****     mouse_report = tmpmr;
 938               		.loc 1 191 5 is_stmt 1 view .LVU295
 191:tmk_core/common/mousekey.c ****     mouse_report = tmpmr;
 939               		.loc 1 191 60 is_stmt 0 view .LVU296
 940 009c 8091 0000 		lds r24,mouse_report+2
 941 00a0 9091 0000 		lds r25,mouse_report+3
 942 00a4 892B      		or r24,r25
 943 00a6 9091 0000 		lds r25,mouse_report+4
 944 00aa 892B      		or r24,r25
 945 00ac 9091 0000 		lds r25,mouse_report+5
 946 00b0 892B      		or r24,r25
 947 00b2 01F0      		breq .L124
 191:tmk_core/common/mousekey.c ****     mouse_report = tmpmr;
 948               		.loc 1 191 79 is_stmt 1 discriminator 7 view .LVU297
 949 00b4 0E94 0000 		call mousekey_send
 950               	.LVL81:
 951               	.L124:
 192:tmk_core/common/mousekey.c **** }
 952               		.loc 1 192 5 view .LVU298
 192:tmk_core/common/mousekey.c **** }
 953               		.loc 1 192 18 is_stmt 0 view .LVU299
 954 00b8 86E0      		ldi r24,lo8(6)
 955 00ba FE01      		movw r30,r28
 956 00bc 3196      		adiw r30,1
 957 00be A0E0      		ldi r26,lo8(mouse_report)
 958 00c0 B0E0      		ldi r27,hi8(mouse_report)
 959               		0:
 960 00c2 0190      		ld r0,Z+
 961 00c4 0D92      		st X+,r0
 962 00c6 8A95      		dec r24
 963 00c8 01F4      		brne 0b
 964               	.LVL82:
 965               	/* epilogue start */
 193:tmk_core/common/mousekey.c **** 
 966               		.loc 1 193 1 view .LVU300
 967 00ca 2696      		adiw r28,6
 968 00cc 0FB6      		in __tmp_reg__,__SREG__
 969 00ce F894      		cli
 970 00d0 DEBF      		out __SP_H__,r29
 971 00d2 0FBE      		out __SREG__,__tmp_reg__
 972 00d4 CDBF      		out __SP_L__,r28
 973 00d6 DF91      		pop r29
 974 00d8 CF91      		pop r28
 975 00da 1F91      		pop r17
 976 00dc 0F91      		pop r16
 977 00de FF90      		pop r15
 978 00e0 EF90      		pop r14
 979 00e2 0895      		ret
 980               	.LVL83:
 981               	.L98:
 156:tmk_core/common/mousekey.c ****         if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 982               		.loc 1 156 105 discriminator 5 view .LVU301
 983 00e4 2091 0000 		lds r18,mk_delay
 984 00e8 8AE0      		ldi r24,lo8(10)
 985 00ea 289F      		mul r18,r24
 986 00ec 9001      		movw r18,r0
 987 00ee 1124      		clr __zero_reg__
 156:tmk_core/common/mousekey.c ****         if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 988               		.loc 1 156 30 discriminator 5 view .LVU302
 989 00f0 2417      		cp r18,r20
 990 00f2 3507      		cpc r19,r21
 991 00f4 00F0      		brlo .+2
 992 00f6 00C0      		rjmp .L97
 993               	.L101:
 157:tmk_core/common/mousekey.c ****         if (tmpmr.x != 0) mouse_report.x = move_unit() * ((tmpmr.x > 0) ? 1 : -1);
 994               		.loc 1 157 43 is_stmt 1 discriminator 1 view .LVU303
 157:tmk_core/common/mousekey.c ****         if (tmpmr.x != 0) mouse_report.x = move_unit() * ((tmpmr.x > 0) ? 1 : -1);
 995               		.loc 1 157 58 is_stmt 0 discriminator 1 view .LVU304
 996 00f8 9F5F      		subi r25,lo8(-(1))
 997 00fa 9093 0000 		sts mousekey_repeat,r25
 998 00fe 00C0      		rjmp .L102
 999               	.L99:
 157:tmk_core/common/mousekey.c ****         if (tmpmr.x != 0) mouse_report.x = move_unit() * ((tmpmr.x > 0) ? 1 : -1);
 1000               		.loc 1 157 9 is_stmt 1 view .LVU305
 157:tmk_core/common/mousekey.c ****         if (tmpmr.x != 0) mouse_report.x = move_unit() * ((tmpmr.x > 0) ? 1 : -1);
 1001               		.loc 1 157 12 is_stmt 0 view .LVU306
 1002 0100 9F3F      		cpi r25,lo8(-1)
 1003 0102 01F4      		brne .L101
 1004               	.L102:
 158:tmk_core/common/mousekey.c ****         if (tmpmr.y != 0) mouse_report.y = move_unit() * ((tmpmr.y > 0) ? 1 : -1);
 1005               		.loc 1 158 9 is_stmt 1 view .LVU307
 158:tmk_core/common/mousekey.c ****         if (tmpmr.y != 0) mouse_report.y = move_unit() * ((tmpmr.y > 0) ? 1 : -1);
 1006               		.loc 1 158 12 is_stmt 0 view .LVU308
 1007 0104 EE20      		tst r14
 1008 0106 01F0      		breq .L103
 158:tmk_core/common/mousekey.c ****         if (tmpmr.y != 0) mouse_report.y = move_unit() * ((tmpmr.y > 0) ? 1 : -1);
 1009               		.loc 1 158 27 is_stmt 1 discriminator 1 view .LVU309
 158:tmk_core/common/mousekey.c ****         if (tmpmr.y != 0) mouse_report.y = move_unit() * ((tmpmr.y > 0) ? 1 : -1);
 1010               		.loc 1 158 44 is_stmt 0 discriminator 1 view .LVU310
 1011 0108 0E94 0000 		call move_unit
 1012               	.LVL84:
 158:tmk_core/common/mousekey.c ****         if (tmpmr.y != 0) mouse_report.y = move_unit() * ((tmpmr.y > 0) ? 1 : -1);
 1013               		.loc 1 158 42 discriminator 1 view .LVU311
 1014 010c 9FEF      		ldi r25,lo8(-1)
 1015 010e 1E14      		cp __zero_reg__,r14
 1016 0110 04F4      		brge .L104
 158:tmk_core/common/mousekey.c ****         if (tmpmr.y != 0) mouse_report.y = move_unit() * ((tmpmr.y > 0) ? 1 : -1);
 1017               		.loc 1 158 42 view .LVU312
 1018 0112 91E0      		ldi r25,lo8(1)
 1019               	.L104:
 158:tmk_core/common/mousekey.c ****         if (tmpmr.y != 0) mouse_report.y = move_unit() * ((tmpmr.y > 0) ? 1 : -1);
 1020               		.loc 1 158 42 discriminator 5 view .LVU313
 1021 0114 899F      		mul r24,r25
 1022 0116 802D      		mov r24,r0
 1023 0118 1124      		clr r1
 1024 011a 8093 0000 		sts mouse_report+2,r24
 1025               	.L103:
 159:tmk_core/common/mousekey.c **** 
 1026               		.loc 1 159 9 is_stmt 1 view .LVU314
 159:tmk_core/common/mousekey.c **** 
 1027               		.loc 1 159 12 is_stmt 0 view .LVU315
 1028 011e FF20      		tst r15
 1029 0120 01F0      		breq .L105
 159:tmk_core/common/mousekey.c **** 
 1030               		.loc 1 159 27 is_stmt 1 discriminator 1 view .LVU316
 159:tmk_core/common/mousekey.c **** 
 1031               		.loc 1 159 44 is_stmt 0 discriminator 1 view .LVU317
 1032 0122 0E94 0000 		call move_unit
 1033               	.LVL85:
 159:tmk_core/common/mousekey.c **** 
 1034               		.loc 1 159 42 discriminator 1 view .LVU318
 1035 0126 9FEF      		ldi r25,lo8(-1)
 1036 0128 1F14      		cp __zero_reg__,r15
 1037 012a 04F4      		brge .L106
 159:tmk_core/common/mousekey.c **** 
 1038               		.loc 1 159 42 view .LVU319
 1039 012c 91E0      		ldi r25,lo8(1)
 1040               	.L106:
 159:tmk_core/common/mousekey.c **** 
 1041               		.loc 1 159 42 discriminator 5 view .LVU320
 1042 012e 899F      		mul r24,r25
 1043 0130 802D      		mov r24,r0
 1044 0132 1124      		clr r1
 1045 0134 8093 0000 		sts mouse_report+3,r24
 1046               	.L105:
 162:tmk_core/common/mousekey.c ****             mouse_report.x = times_inv_sqrt2(mouse_report.x);
 1047               		.loc 1 162 9 is_stmt 1 view .LVU321
 162:tmk_core/common/mousekey.c ****             mouse_report.x = times_inv_sqrt2(mouse_report.x);
 1048               		.loc 1 162 25 is_stmt 0 view .LVU322
 1049 0138 3091 0000 		lds r19,mouse_report+2
 162:tmk_core/common/mousekey.c ****             mouse_report.x = times_inv_sqrt2(mouse_report.x);
 1050               		.loc 1 162 12 view .LVU323
 1051 013c 3323      		tst r19
 1052 013e 01F4      		brne .+2
 1053 0140 00C0      		rjmp .L97
 162:tmk_core/common/mousekey.c ****             mouse_report.x = times_inv_sqrt2(mouse_report.x);
 1054               		.loc 1 162 43 discriminator 1 view .LVU324
 1055 0142 2091 0000 		lds r18,mouse_report+3
 162:tmk_core/common/mousekey.c ****             mouse_report.x = times_inv_sqrt2(mouse_report.x);
 1056               		.loc 1 162 28 discriminator 1 view .LVU325
 1057 0146 2223      		tst r18
 1058 0148 01F4      		brne .+2
 1059 014a 00C0      		rjmp .L97
 163:tmk_core/common/mousekey.c ****             if (mouse_report.x == 0) {
 1060               		.loc 1 163 13 is_stmt 1 view .LVU326
 1061               	.LVL86:
 1062               	.LBB10:
 1063               	.LBI10:
  26:tmk_core/common/mousekey.c ****     // 181/256 is pretty close to 1/sqrt(2)
 1064               		.loc 1 26 15 view .LVU327
 1065               	.LBB11:
  31:tmk_core/common/mousekey.c **** }
 1066               		.loc 1 31 5 view .LVU328
  31:tmk_core/common/mousekey.c **** }
 1067               		.loc 1 31 15 is_stmt 0 view .LVU329
 1068 014c 45EB      		ldi r20,lo8(-75)
 1069 014e 3403      		mulsu r19,r20
 1070 0150 C001      		movw r24,r0
 1071 0152 1124      		clr __zero_reg__
 1072               	.LVL87:
  31:tmk_core/common/mousekey.c **** }
 1073               		.loc 1 31 15 view .LVU330
 1074               	.LBE11:
 1075               	.LBE10:
 164:tmk_core/common/mousekey.c ****                 mouse_report.x = 1;
 1076               		.loc 1 164 13 is_stmt 1 view .LVU331
 164:tmk_core/common/mousekey.c ****                 mouse_report.x = 1;
 1077               		.loc 1 164 16 is_stmt 0 view .LVU332
 1078 0154 9923      		tst r25
 1079 0156 01F0      		breq .L107
 163:tmk_core/common/mousekey.c ****             if (mouse_report.x == 0) {
 1080               		.loc 1 163 28 view .LVU333
 1081 0158 9093 0000 		sts mouse_report+2,r25
 1082               	.L108:
 167:tmk_core/common/mousekey.c ****             if (mouse_report.y == 0) {
 1083               		.loc 1 167 13 is_stmt 1 view .LVU334
 1084               	.LVL88:
 1085               	.LBB12:
 1086               	.LBI12:
  26:tmk_core/common/mousekey.c ****     // 181/256 is pretty close to 1/sqrt(2)
 1087               		.loc 1 26 15 view .LVU335
 1088               	.LBB13:
  31:tmk_core/common/mousekey.c **** }
 1089               		.loc 1 31 5 view .LVU336
  31:tmk_core/common/mousekey.c **** }
 1090               		.loc 1 31 15 is_stmt 0 view .LVU337
 1091 015c 45EB      		ldi r20,lo8(-75)
 1092 015e 2403      		mulsu r18,r20
 1093 0160 9001      		movw r18,r0
 1094 0162 1124      		clr __zero_reg__
 1095               	.LVL89:
  31:tmk_core/common/mousekey.c **** }
 1096               		.loc 1 31 15 view .LVU338
 1097               	.LBE13:
 1098               	.LBE12:
 168:tmk_core/common/mousekey.c ****                 mouse_report.y = 1;
 1099               		.loc 1 168 13 is_stmt 1 view .LVU339
 168:tmk_core/common/mousekey.c ****                 mouse_report.y = 1;
 1100               		.loc 1 168 16 is_stmt 0 view .LVU340
 1101 0164 3323      		tst r19
 1102 0166 01F0      		breq .L109
 167:tmk_core/common/mousekey.c ****             if (mouse_report.y == 0) {
 1103               		.loc 1 167 28 view .LVU341
 1104 0168 3093 0000 		sts mouse_report+3,r19
 1105 016c 00C0      		rjmp .L97
 1106               	.L107:
 165:tmk_core/common/mousekey.c ****             }
 1107               		.loc 1 165 17 is_stmt 1 view .LVU342
 165:tmk_core/common/mousekey.c ****             }
 1108               		.loc 1 165 32 is_stmt 0 view .LVU343
 1109 016e 81E0      		ldi r24,lo8(1)
 1110 0170 8093 0000 		sts mouse_report+2,r24
 1111 0174 00C0      		rjmp .L108
 1112               	.L109:
 169:tmk_core/common/mousekey.c ****             }
 1113               		.loc 1 169 17 is_stmt 1 view .LVU344
 169:tmk_core/common/mousekey.c ****             }
 1114               		.loc 1 169 32 is_stmt 0 view .LVU345
 1115 0176 81E0      		ldi r24,lo8(1)
 1116 0178 8093 0000 		sts mouse_report+3,r24
 1117 017c 00C0      		rjmp .L97
 1118               	.L112:
 173:tmk_core/common/mousekey.c ****         if (mousekey_wheel_repeat != UINT8_MAX) mousekey_wheel_repeat++;
 1119               		.loc 1 173 123 discriminator 5 view .LVU346
 1120 017e 2091 0000 		lds r18,mk_wheel_delay
 1121 0182 8AE0      		ldi r24,lo8(10)
 1122 0184 289F      		mul r18,r24
 1123 0186 9001      		movw r18,r0
 1124 0188 1124      		clr __zero_reg__
 173:tmk_core/common/mousekey.c ****         if (mousekey_wheel_repeat != UINT8_MAX) mousekey_wheel_repeat++;
 1125               		.loc 1 173 30 discriminator 5 view .LVU347
 1126 018a 2417      		cp r18,r20
 1127 018c 3507      		cpc r19,r21
 1128 018e 00F0      		brlo .+2
 1129 0190 00C0      		rjmp .L111
 1130               	.L115:
 174:tmk_core/common/mousekey.c ****         if (tmpmr.v != 0) mouse_report.v = wheel_unit() * ((tmpmr.v > 0) ? 1 : -1);
 1131               		.loc 1 174 49 is_stmt 1 discriminator 1 view .LVU348
 174:tmk_core/common/mousekey.c ****         if (tmpmr.v != 0) mouse_report.v = wheel_unit() * ((tmpmr.v > 0) ? 1 : -1);
 1132               		.loc 1 174 70 is_stmt 0 discriminator 1 view .LVU349
 1133 0192 9F5F      		subi r25,lo8(-(1))
 1134 0194 9093 0000 		sts mousekey_wheel_repeat,r25
 1135 0198 00C0      		rjmp .L116
 1136               	.L113:
 174:tmk_core/common/mousekey.c ****         if (tmpmr.v != 0) mouse_report.v = wheel_unit() * ((tmpmr.v > 0) ? 1 : -1);
 1137               		.loc 1 174 9 is_stmt 1 view .LVU350
 174:tmk_core/common/mousekey.c ****         if (tmpmr.v != 0) mouse_report.v = wheel_unit() * ((tmpmr.v > 0) ? 1 : -1);
 1138               		.loc 1 174 12 is_stmt 0 view .LVU351
 1139 019a 9F3F      		cpi r25,lo8(-1)
 1140 019c 01F4      		brne .L115
 1141               	.L116:
 175:tmk_core/common/mousekey.c ****         if (tmpmr.h != 0) mouse_report.h = wheel_unit() * ((tmpmr.h > 0) ? 1 : -1);
 1142               		.loc 1 175 9 is_stmt 1 view .LVU352
 175:tmk_core/common/mousekey.c ****         if (tmpmr.h != 0) mouse_report.h = wheel_unit() * ((tmpmr.h > 0) ? 1 : -1);
 1143               		.loc 1 175 12 is_stmt 0 view .LVU353
 1144 019e 0023      		tst r16
 1145 01a0 01F0      		breq .L117
 175:tmk_core/common/mousekey.c ****         if (tmpmr.h != 0) mouse_report.h = wheel_unit() * ((tmpmr.h > 0) ? 1 : -1);
 1146               		.loc 1 175 27 is_stmt 1 discriminator 1 view .LVU354
 175:tmk_core/common/mousekey.c ****         if (tmpmr.h != 0) mouse_report.h = wheel_unit() * ((tmpmr.h > 0) ? 1 : -1);
 1147               		.loc 1 175 44 is_stmt 0 discriminator 1 view .LVU355
 1148 01a2 0E94 0000 		call wheel_unit
 1149               	.LVL90:
 175:tmk_core/common/mousekey.c ****         if (tmpmr.h != 0) mouse_report.h = wheel_unit() * ((tmpmr.h > 0) ? 1 : -1);
 1150               		.loc 1 175 42 discriminator 1 view .LVU356
 1151 01a6 9FEF      		ldi r25,lo8(-1)
 1152 01a8 1016      		cp __zero_reg__,r16
 1153 01aa 04F4      		brge .L118
 175:tmk_core/common/mousekey.c ****         if (tmpmr.h != 0) mouse_report.h = wheel_unit() * ((tmpmr.h > 0) ? 1 : -1);
 1154               		.loc 1 175 42 view .LVU357
 1155 01ac 91E0      		ldi r25,lo8(1)
 1156               	.L118:
 175:tmk_core/common/mousekey.c ****         if (tmpmr.h != 0) mouse_report.h = wheel_unit() * ((tmpmr.h > 0) ? 1 : -1);
 1157               		.loc 1 175 42 discriminator 5 view .LVU358
 1158 01ae 899F      		mul r24,r25
 1159 01b0 802D      		mov r24,r0
 1160 01b2 1124      		clr r1
 1161 01b4 8093 0000 		sts mouse_report+4,r24
 1162               	.L117:
 176:tmk_core/common/mousekey.c **** 
 1163               		.loc 1 176 9 is_stmt 1 view .LVU359
 176:tmk_core/common/mousekey.c **** 
 1164               		.loc 1 176 12 is_stmt 0 view .LVU360
 1165 01b8 1123      		tst r17
 1166 01ba 01F0      		breq .L119
 176:tmk_core/common/mousekey.c **** 
 1167               		.loc 1 176 27 is_stmt 1 discriminator 1 view .LVU361
 176:tmk_core/common/mousekey.c **** 
 1168               		.loc 1 176 44 is_stmt 0 discriminator 1 view .LVU362
 1169 01bc 0E94 0000 		call wheel_unit
 1170               	.LVL91:
 176:tmk_core/common/mousekey.c **** 
 1171               		.loc 1 176 42 discriminator 1 view .LVU363
 1172 01c0 9FEF      		ldi r25,lo8(-1)
 1173 01c2 1116      		cp __zero_reg__,r17
 1174 01c4 04F4      		brge .L120
 176:tmk_core/common/mousekey.c **** 
 1175               		.loc 1 176 42 view .LVU364
 1176 01c6 91E0      		ldi r25,lo8(1)
 1177               	.L120:
 176:tmk_core/common/mousekey.c **** 
 1178               		.loc 1 176 42 discriminator 5 view .LVU365
 1179 01c8 899F      		mul r24,r25
 1180 01ca 802D      		mov r24,r0
 1181 01cc 1124      		clr r1
 1182 01ce 8093 0000 		sts mouse_report+5,r24
 1183               	.L119:
 179:tmk_core/common/mousekey.c ****             mouse_report.v = times_inv_sqrt2(mouse_report.v);
 1184               		.loc 1 179 9 is_stmt 1 view .LVU366
 179:tmk_core/common/mousekey.c ****             mouse_report.v = times_inv_sqrt2(mouse_report.v);
 1185               		.loc 1 179 25 is_stmt 0 view .LVU367
 1186 01d2 3091 0000 		lds r19,mouse_report+4
 179:tmk_core/common/mousekey.c ****             mouse_report.v = times_inv_sqrt2(mouse_report.v);
 1187               		.loc 1 179 12 view .LVU368
 1188 01d6 3323      		tst r19
 1189 01d8 01F4      		brne .+2
 1190 01da 00C0      		rjmp .L111
 1191 01dc 2091 0000 		lds r18,mouse_report+5
 179:tmk_core/common/mousekey.c ****             mouse_report.v = times_inv_sqrt2(mouse_report.v);
 1192               		.loc 1 179 28 discriminator 1 view .LVU369
 1193 01e0 2223      		tst r18
 1194 01e2 01F4      		brne .+2
 1195 01e4 00C0      		rjmp .L111
 180:tmk_core/common/mousekey.c ****             if (mouse_report.v == 0) {
 1196               		.loc 1 180 13 is_stmt 1 view .LVU370
 1197               	.LVL92:
 1198               	.LBB14:
 1199               	.LBI14:
  26:tmk_core/common/mousekey.c ****     // 181/256 is pretty close to 1/sqrt(2)
 1200               		.loc 1 26 15 view .LVU371
 1201               	.LBB15:
  31:tmk_core/common/mousekey.c **** }
 1202               		.loc 1 31 5 view .LVU372
  31:tmk_core/common/mousekey.c **** }
 1203               		.loc 1 31 15 is_stmt 0 view .LVU373
 1204 01e6 45EB      		ldi r20,lo8(-75)
 1205 01e8 3403      		mulsu r19,r20
 1206 01ea C001      		movw r24,r0
 1207 01ec 1124      		clr __zero_reg__
 1208               	.LVL93:
  31:tmk_core/common/mousekey.c **** }
 1209               		.loc 1 31 15 view .LVU374
 1210               	.LBE15:
 1211               	.LBE14:
 181:tmk_core/common/mousekey.c ****                 mouse_report.v = 1;
 1212               		.loc 1 181 13 is_stmt 1 view .LVU375
 181:tmk_core/common/mousekey.c ****                 mouse_report.v = 1;
 1213               		.loc 1 181 16 is_stmt 0 view .LVU376
 1214 01ee 9923      		tst r25
 1215 01f0 01F0      		breq .L121
 180:tmk_core/common/mousekey.c ****             if (mouse_report.v == 0) {
 1216               		.loc 1 180 28 view .LVU377
 1217 01f2 9093 0000 		sts mouse_report+4,r25
 1218               	.L122:
 184:tmk_core/common/mousekey.c ****             if (mouse_report.h == 0) {
 1219               		.loc 1 184 13 is_stmt 1 view .LVU378
 1220               	.LVL94:
 1221               	.LBB16:
 1222               	.LBI16:
  26:tmk_core/common/mousekey.c ****     // 181/256 is pretty close to 1/sqrt(2)
 1223               		.loc 1 26 15 view .LVU379
 1224               	.LBB17:
  31:tmk_core/common/mousekey.c **** }
 1225               		.loc 1 31 5 view .LVU380
  31:tmk_core/common/mousekey.c **** }
 1226               		.loc 1 31 15 is_stmt 0 view .LVU381
 1227 01f6 45EB      		ldi r20,lo8(-75)
 1228 01f8 2403      		mulsu r18,r20
 1229 01fa 9001      		movw r18,r0
 1230 01fc 1124      		clr __zero_reg__
 1231               	.LVL95:
  31:tmk_core/common/mousekey.c **** }
 1232               		.loc 1 31 15 view .LVU382
 1233               	.LBE17:
 1234               	.LBE16:
 185:tmk_core/common/mousekey.c ****                 mouse_report.h = 1;
 1235               		.loc 1 185 13 is_stmt 1 view .LVU383
 185:tmk_core/common/mousekey.c ****                 mouse_report.h = 1;
 1236               		.loc 1 185 16 is_stmt 0 view .LVU384
 1237 01fe 3323      		tst r19
 1238 0200 01F0      		breq .L123
 184:tmk_core/common/mousekey.c ****             if (mouse_report.h == 0) {
 1239               		.loc 1 184 28 view .LVU385
 1240 0202 3093 0000 		sts mouse_report+5,r19
 1241 0206 00C0      		rjmp .L111
 1242               	.L121:
 182:tmk_core/common/mousekey.c ****             }
 1243               		.loc 1 182 17 is_stmt 1 view .LVU386
 182:tmk_core/common/mousekey.c ****             }
 1244               		.loc 1 182 32 is_stmt 0 view .LVU387
 1245 0208 81E0      		ldi r24,lo8(1)
 1246 020a 8093 0000 		sts mouse_report+4,r24
 1247 020e 00C0      		rjmp .L122
 1248               	.L123:
 186:tmk_core/common/mousekey.c ****             }
 1249               		.loc 1 186 17 is_stmt 1 view .LVU388
 186:tmk_core/common/mousekey.c ****             }
 1250               		.loc 1 186 32 is_stmt 0 view .LVU389
 1251 0210 81E0      		ldi r24,lo8(1)
 1252 0212 8093 0000 		sts mouse_report+5,r24
 1253 0216 00C0      		rjmp .L111
 1254               		.cfi_endproc
 1255               	.LFE105:
 1257               		.section	.text.mousekey_clear,"ax",@progbits
 1258               	.global	mousekey_clear
 1260               	mousekey_clear:
 1261               	.LFB109:
 420:tmk_core/common/mousekey.c **** }
 421:tmk_core/common/mousekey.c **** 
 422:tmk_core/common/mousekey.c **** void mousekey_clear(void) {
 1262               		.loc 1 422 27 is_stmt 1 view -0
 1263               		.cfi_startproc
 1264               	/* prologue: function */
 1265               	/* frame size = 0 */
 1266               	/* stack size = 0 */
 1267               	.L__stack_usage = 0
 423:tmk_core/common/mousekey.c ****     mouse_report          = (report_mouse_t){};
 1268               		.loc 1 423 5 view .LVU391
 1269               		.loc 1 423 27 is_stmt 0 view .LVU392
 1270 0000 86E0      		ldi r24,lo8(6)
 1271 0002 E0E0      		ldi r30,lo8(mouse_report)
 1272 0004 F0E0      		ldi r31,hi8(mouse_report)
 1273 0006 DF01      		movw r26,r30
 1274               		0:
 1275 0008 1D92      		st X+,__zero_reg__
 1276 000a 8A95      		dec r24
 1277 000c 01F4      		brne 0b
 424:tmk_core/common/mousekey.c ****     mousekey_repeat       = 0;
 1278               		.loc 1 424 5 is_stmt 1 view .LVU393
 1279               		.loc 1 424 27 is_stmt 0 view .LVU394
 1280 000e 1092 0000 		sts mousekey_repeat,__zero_reg__
 425:tmk_core/common/mousekey.c ****     mousekey_wheel_repeat = 0;
 1281               		.loc 1 425 5 is_stmt 1 view .LVU395
 1282               		.loc 1 425 27 is_stmt 0 view .LVU396
 1283 0012 1092 0000 		sts mousekey_wheel_repeat,__zero_reg__
 426:tmk_core/common/mousekey.c ****     mousekey_accel        = 0;
 1284               		.loc 1 426 5 is_stmt 1 view .LVU397
 1285               		.loc 1 426 27 is_stmt 0 view .LVU398
 1286 0016 1092 0000 		sts mousekey_accel,__zero_reg__
 1287               	/* epilogue start */
 427:tmk_core/common/mousekey.c **** }
 1288               		.loc 1 427 1 view .LVU399
 1289 001a 0895      		ret
 1290               		.cfi_endproc
 1291               	.LFE109:
 1293               	.global	mk_wheel_time_to_max
 1294               		.section	.data.mk_wheel_time_to_max,"aw"
 1297               	mk_wheel_time_to_max:
 1298 0000 28        		.byte	40
 1299               	.global	mk_wheel_max_speed
 1300               		.section	.data.mk_wheel_max_speed,"aw"
 1303               	mk_wheel_max_speed:
 1304 0000 08        		.byte	8
 1305               	.global	mk_wheel_interval
 1306               		.section	.data.mk_wheel_interval,"aw"
 1309               	mk_wheel_interval:
 1310 0000 64        		.byte	100
 1311               	.global	mk_wheel_delay
 1312               		.section	.bss.mk_wheel_delay,"aw",@nobits
 1315               	mk_wheel_delay:
 1316 0000 00        		.zero	1
 1317               	.global	mk_time_to_max
 1318               		.section	.data.mk_time_to_max,"aw"
 1321               	mk_time_to_max:
 1322 0000 3C        		.byte	60
 1323               	.global	mk_max_speed
 1324               		.section	.data.mk_max_speed,"aw"
 1327               	mk_max_speed:
 1328 0000 07        		.byte	7
 1329               	.global	mk_interval
 1330               		.section	.data.mk_interval,"aw"
 1333               	mk_interval:
 1334 0000 14        		.byte	20
 1335               	.global	mk_delay
 1336               		.section	.bss.mk_delay,"aw",@nobits
 1339               	mk_delay:
 1340 0000 00        		.zero	1
 1341               		.section	.bss.last_timer_w,"aw",@nobits
 1344               	last_timer_w:
 1345 0000 0000      		.zero	2
 1346               		.section	.bss.last_timer_c,"aw",@nobits
 1349               	last_timer_c:
 1350 0000 0000      		.zero	2
 1351               		.section	.bss.mousekey_wheel_repeat,"aw",@nobits
 1354               	mousekey_wheel_repeat:
 1355 0000 00        		.zero	1
 1356               		.section	.bss.mousekey_repeat,"aw",@nobits
 1359               	mousekey_repeat:
 1360 0000 00        		.zero	1
 1361               		.section	.bss.mousekey_accel,"aw",@nobits
 1364               	mousekey_accel:
 1365 0000 00        		.zero	1
 1366               		.section	.bss.mouse_report,"aw",@nobits
 1369               	mouse_report:
 1370 0000 0000 0000 		.zero	6
 1370      0000 
 1371               		.text
 1372               	.Letext0:
 1373               		.file 2 "/usr/local/Cellar/avr-gcc@8/8.4.0/avr/include/stdint.h"
 1374               		.file 3 "tmk_core/common/keycode.h"
 1375               		.file 4 "tmk_core/common/report.h"
 1376               		.file 5 "lib/lufa/LUFA/Drivers/USB/Core/AVR8/../StdRequestType.h"
 1377               		.file 6 "lib/lufa/LUFA/Drivers/USB/Core/AVR8/../DeviceStandardReq.h"
 1378               		.file 7 "lib/lufa/LUFA/Drivers/USB/Core/USBTask.h"
 1379               		.file 8 "lib/lufa/LUFA/Drivers/USB/Core/HostStandardReq.h"
 1380               		.file 9 "/usr/local/Cellar/avr-gcc@8/8.4.0/avr/include/stdio.h"
 1381               		.file 10 "tmk_core/common/host.h"
 1382               		.file 11 "tmk_core/common/timer.h"
 1383               		.file 12 "tmk_core/common/debug.h"
 1384               		.file 13 "tmk_core/common/mousekey.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 mousekey.c
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:2      *ABS*:000000000000003e __SP_H__
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:3      *ABS*:000000000000003d __SP_L__
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:4      *ABS*:000000000000003f __SREG__
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:5      *ABS*:0000000000000000 __tmp_reg__
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:6      *ABS*:0000000000000001 __zero_reg__
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:12     .text.move_unit:0000000000000000 move_unit
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1364   .bss.mousekey_accel:0000000000000000 mousekey_accel
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1327   .data.mk_max_speed:0000000000000000 mk_max_speed
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1359   .bss.mousekey_repeat:0000000000000000 mousekey_repeat
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1321   .data.mk_time_to_max:0000000000000000 mk_time_to_max
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:148    .text.wheel_unit:0000000000000000 wheel_unit
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1303   .data.mk_wheel_max_speed:0000000000000000 mk_wheel_max_speed
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1354   .bss.mousekey_wheel_repeat:0000000000000000 mousekey_wheel_repeat
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1297   .data.mk_wheel_time_to_max:0000000000000000 mk_wheel_time_to_max
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:266    .text.mousekey_on:0000000000000000 mousekey_on
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1369   .bss.mouse_report:0000000000000000 mouse_report
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:503    .text.mousekey_off:0000000000000000 mousekey_off
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:763    .text.mousekey_send:0000000000000000 mousekey_send
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1349   .bss.last_timer_c:0000000000000000 last_timer_c
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1344   .bss.last_timer_w:0000000000000000 last_timer_w
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:812    .text.mousekey_task:0000000000000000 mousekey_task
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1333   .data.mk_interval:0000000000000000 mk_interval
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1309   .data.mk_wheel_interval:0000000000000000 mk_wheel_interval
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1339   .bss.mk_delay:0000000000000000 mk_delay
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1315   .bss.mk_wheel_delay:0000000000000000 mk_wheel_delay
/var/folders/_9/m54r6fns3hz487qfhcdsxzvr0000gn/T//cc6lijuf.s:1260   .text.mousekey_clear:0000000000000000 mousekey_clear

UNDEFINED SYMBOLS
__divmodhi4
timer_read
host_mouse_send
timer_elapsed
__do_copy_data
__do_clear_bss
